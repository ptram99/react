{"ast":null,"code":"import _asyncToGenerator from\"C:\\\\Users\\\\User\\\\~\\\\metaplex\\\\fair-launch\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"C:\\\\Users\\\\User\\\\~\\\\metaplex\\\\fair-launch\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _taggedTemplateLiteral from\"C:\\\\Users\\\\User\\\\~\\\\metaplex\\\\fair-launch\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\taggedTemplateLiteral.js\";var _templateObject;import _regeneratorRuntime from\"C:\\\\Users\\\\User\\\\~\\\\metaplex\\\\fair-launch\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import styled from'styled-components';import Button from'@material-ui/core/Button';import{CircularProgress}from'@material-ui/core';import{GatewayStatus,useGateway}from'@civic/solana-gateway-react';import{useEffect,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";export var CTAButton=styled(Button)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  height: 60px;\\n  margin-top: 10px;\\n  margin-bottom: 5px;\\n  background: linear-gradient(180deg, #604ae5 0%, #813eee 100%);\\n  color: white;\\n  font-size: 16px;\\n  font-weight: bold;\\n\"])));// add your styles here\nexport var MintButton=function MintButton(_ref){var _fairLaunch$ticket,_fairLaunch$ticket$da,_fairLaunch$ticket2,_fairLaunch$ticket2$d;var onMint=_ref.onMint,candyMachine=_ref.candyMachine,fairLaunch=_ref.fairLaunch,isMinting=_ref.isMinting,fairLaunchBalance=_ref.fairLaunchBalance;var _useGateway=useGateway(),requestGatewayToken=_useGateway.requestGatewayToken,gatewayStatus=_useGateway.gatewayStatus;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),clicked=_useState2[0],setClicked=_useState2[1];useEffect(function(){if(gatewayStatus===GatewayStatus.ACTIVE&&clicked){console.log('Minting');onMint();setClicked(false);}},[gatewayStatus,clicked,setClicked,onMint]);return/*#__PURE__*/_jsx(CTAButton,{disabled:(candyMachine===null||candyMachine===void 0?void 0:candyMachine.state.isSoldOut)||isMinting||!(candyMachine!==null&&candyMachine!==void 0&&candyMachine.state.isActive)||(fairLaunch===null||fairLaunch===void 0?void 0:(_fairLaunch$ticket=fairLaunch.ticket)===null||_fairLaunch$ticket===void 0?void 0:(_fairLaunch$ticket$da=_fairLaunch$ticket.data)===null||_fairLaunch$ticket$da===void 0?void 0:_fairLaunch$ticket$da.state.punched)&&fairLaunchBalance===0,onClick:/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setClicked(true);if(!(candyMachine!==null&&candyMachine!==void 0&&candyMachine.state.isActive&&candyMachine!==null&&candyMachine!==void 0&&candyMachine.state.gatekeeper)){_context.next=10;break;}if(!(gatewayStatus===GatewayStatus.ACTIVE)){_context.next=6;break;}setClicked(true);_context.next=8;break;case 6:_context.next=8;return requestGatewayToken();case 8:_context.next=13;break;case 10:_context.next=12;return onMint();case 12:setClicked(false);case 13:case\"end\":return _context.stop();}}},_callee);})),variant:\"contained\",children:fairLaunch!==null&&fairLaunch!==void 0&&(_fairLaunch$ticket2=fairLaunch.ticket)!==null&&_fairLaunch$ticket2!==void 0&&(_fairLaunch$ticket2$d=_fairLaunch$ticket2.data)!==null&&_fairLaunch$ticket2$d!==void 0&&_fairLaunch$ticket2$d.state.punched&&fairLaunchBalance===0?'MINTED':candyMachine!==null&&candyMachine!==void 0&&candyMachine.state.isSoldOut?'SOLD OUT':isMinting?/*#__PURE__*/_jsx(CircularProgress,{}):'MINT'});};","map":{"version":3,"sources":["C:/Users/User/~/metaplex/fair-launch/src/MintButton.tsx"],"names":["styled","Button","CircularProgress","GatewayStatus","useGateway","useEffect","useState","CTAButton","MintButton","onMint","candyMachine","fairLaunch","isMinting","fairLaunchBalance","requestGatewayToken","gatewayStatus","clicked","setClicked","ACTIVE","console","log","state","isSoldOut","isActive","ticket","data","punched","gatekeeper"],"mappings":"0jBAAA,MAAOA,CAAAA,MAAP,KAAmB,mBAAnB,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CAGA,OAASC,gBAAT,KAAiC,mBAAjC,CACA,OAASC,aAAT,CAAwBC,UAAxB,KAA0C,6BAA1C,CACA,OAASC,SAAT,CAAoBC,QAApB,KAAoC,OAApC,C,2CAEA,MAAO,IAAMC,CAAAA,SAAS,CAAGP,MAAM,CAACC,MAAD,CAAT,6QAAf,CASJ;AAEH,MAAO,IAAMO,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,MAYpB,2FAXJC,CAAAA,MAWI,MAXJA,MAWI,CAVJC,YAUI,MAVJA,YAUI,CATJC,UASI,MATJA,UASI,CARJC,SAQI,MARJA,SAQI,CAPJC,iBAOI,MAPJA,iBAOI,CACJ,gBAA+CT,UAAU,EAAzD,CAAQU,mBAAR,aAAQA,mBAAR,CAA6BC,aAA7B,aAA6BA,aAA7B,CACA,cAA8BT,QAAQ,CAAC,KAAD,CAAtC,wCAAOU,OAAP,eAAgBC,UAAhB,eAEAZ,SAAS,CAAC,UAAM,CACd,GAAIU,aAAa,GAAKZ,aAAa,CAACe,MAAhC,EAA0CF,OAA9C,CAAuD,CACrDG,OAAO,CAACC,GAAR,CAAY,SAAZ,EACAX,MAAM,GACNQ,UAAU,CAAC,KAAD,CAAV,CACD,CACF,CANQ,CAMN,CAACF,aAAD,CAAgBC,OAAhB,CAAyBC,UAAzB,CAAqCR,MAArC,CANM,CAAT,CAOA,mBACE,KAAC,SAAD,EACE,QAAQ,CACN,CAAAC,YAAY,OAAZ,EAAAA,YAAY,SAAZ,QAAAA,YAAY,CAAEW,KAAd,CAAoBC,SAApB,GACAV,SADA,EAEA,EAACF,YAAD,SAACA,YAAD,WAACA,YAAY,CAAEW,KAAd,CAAoBE,QAArB,CAFA,EAGC,CAAAZ,UAAU,OAAV,EAAAA,UAAU,SAAV,4BAAAA,UAAU,CAAEa,MAAZ,uFAAoBC,IAApB,sEAA0BJ,KAA1B,CAAgCK,OAAhC,GAA2Cb,iBAAiB,GAAK,CALtE,CAOE,OAAO,sEAAE,mIACPI,UAAU,CAAC,IAAD,CAAV,CADO,KAEHP,YAAY,OAAZ,EAAAA,YAAY,SAAZ,EAAAA,YAAY,CAAEW,KAAd,CAAoBE,QAApB,EAAgCb,YAAhC,SAAgCA,YAAhC,WAAgCA,YAAY,CAAEW,KAAd,CAAoBM,UAFjD,gCAGDZ,aAAa,GAAKZ,aAAa,CAACe,MAH/B,0BAIHD,UAAU,CAAC,IAAD,CAAV,CAJG,mDAMGH,CAAAA,mBAAmB,EANtB,8DASCL,CAAAA,MAAM,EATP,SAULQ,UAAU,CAAC,KAAD,CAAV,CAVK,uDAAF,EAPT,CAoBE,OAAO,CAAC,WApBV,UAsBGN,UAAU,OAAV,EAAAA,UAAU,SAAV,uBAAAA,UAAU,CAAEa,MAAZ,mFAAoBC,IAApB,gEAA0BJ,KAA1B,CAAgCK,OAAhC,EAA2Cb,iBAAiB,GAAK,CAAjE,CACC,QADD,CAEGH,YAAY,OAAZ,EAAAA,YAAY,SAAZ,EAAAA,YAAY,CAAEW,KAAd,CAAoBC,SAApB,CACF,UADE,CAEAV,SAAS,cACX,KAAC,gBAAD,IADW,CAGX,MA7BJ,EADF,CAkCD,CAzDM","sourcesContent":["import styled from 'styled-components';\r\nimport Button from '@material-ui/core/Button';\r\nimport { CandyMachineAccount } from './candy-machine';\r\nimport { FairLaunchAccount } from './fair-launch';\r\nimport { CircularProgress } from '@material-ui/core';\r\nimport { GatewayStatus, useGateway } from '@civic/solana-gateway-react';\r\nimport { useEffect, useState } from 'react';\r\n\r\nexport const CTAButton = styled(Button)`\r\n  width: 100%;\r\n  height: 60px;\r\n  margin-top: 10px;\r\n  margin-bottom: 5px;\r\n  background: linear-gradient(180deg, #604ae5 0%, #813eee 100%);\r\n  color: white;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n`; // add your styles here\r\n\r\nexport const MintButton = ({\r\n  onMint,\r\n  candyMachine,\r\n  fairLaunch,\r\n  isMinting,\r\n  fairLaunchBalance,\r\n}: {\r\n  onMint: () => Promise<void>;\r\n  candyMachine: CandyMachineAccount | undefined;\r\n  fairLaunch?: FairLaunchAccount | undefined;\r\n  isMinting: boolean;\r\n  fairLaunchBalance: number;\r\n}) => {\r\n  const { requestGatewayToken, gatewayStatus } = useGateway();\r\n  const [clicked, setClicked] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (gatewayStatus === GatewayStatus.ACTIVE && clicked) {\r\n      console.log('Minting');\r\n      onMint();\r\n      setClicked(false);\r\n    }\r\n  }, [gatewayStatus, clicked, setClicked, onMint]);\r\n  return (\r\n    <CTAButton\r\n      disabled={\r\n        candyMachine?.state.isSoldOut ||\r\n        isMinting ||\r\n        !candyMachine?.state.isActive ||\r\n        (fairLaunch?.ticket?.data?.state.punched && fairLaunchBalance === 0)\r\n      }\r\n      onClick={async () => {\r\n        setClicked(true);\r\n        if (candyMachine?.state.isActive && candyMachine?.state.gatekeeper) {\r\n          if (gatewayStatus === GatewayStatus.ACTIVE) {\r\n            setClicked(true);\r\n          } else {\r\n            await requestGatewayToken();\r\n          }\r\n        } else {\r\n          await onMint();\r\n          setClicked(false);\r\n        }\r\n      }}\r\n      variant=\"contained\"\r\n    >\r\n      {fairLaunch?.ticket?.data?.state.punched && fairLaunchBalance === 0 ? (\r\n        'MINTED'\r\n      ) : candyMachine?.state.isSoldOut ? (\r\n        'SOLD OUT'\r\n      ) : isMinting ? (\r\n        <CircularProgress />\r\n      ) : (\r\n        'MINT'\r\n      )}\r\n    </CTAButton>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}