{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\User\\\\~\\\\metaplex\\\\fair-launch\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";import _toConsumableArray from\"C:\\\\Users\\\\User\\\\~\\\\metaplex\\\\fair-launch\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\toConsumableArray.js\";import _asyncToGenerator from\"C:\\\\Users\\\\User\\\\~\\\\metaplex\\\\fair-launch\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"C:\\\\Users\\\\User\\\\~\\\\metaplex\\\\fair-launch\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _taggedTemplateLiteral from\"C:\\\\Users\\\\User\\\\~\\\\metaplex\\\\fair-launch\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\taggedTemplateLiteral.js\";var _templateObject,_templateObject2;import _regeneratorRuntime from\"C:\\\\Users\\\\User\\\\~\\\\metaplex\\\\fair-launch\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useEffect,useMemo,useState}from'react';import styled from'styled-components';import{CircularProgress,Container,IconButton,Link,Slider,Snackbar}from'@material-ui/core';import Paper from'@material-ui/core/Paper';import Typography from'@material-ui/core/Typography';import Grid from'@material-ui/core/Grid';import{createStyles}from'@material-ui/core/styles';import Dialog from'@material-ui/core/Dialog';import MuiDialogTitle from'@material-ui/core/DialogTitle';import MuiDialogContent from'@material-ui/core/DialogContent';import CloseIcon from'@material-ui/icons/Close';import Alert from'@material-ui/lab/Alert';import{LAMPORTS_PER_SOL,PublicKey}from'@solana/web3.js';import{useWallet}from'@solana/wallet-adapter-react';import{WalletDialogButton}from'@solana/wallet-adapter-material-ui';import{awaitTransactionSignatureConfirmation,CANDY_MACHINE_PROGRAM,getCandyMachineState,mintOneToken}from'./candy-machine';import{getFairLaunchState,punchTicket,purchaseTicket}from'./fair-launch';import{formatNumber,getAtaForMint,toDate}from'./utils';import{CTAButton,MintButton}from'./MintButton';import{AntiRug}from'./AntiRug';import{getPhase,Phase,PhaseHeader}from'./PhaseHeader';import{GatewayProvider}from'@civic/solana-gateway-react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ConnectButton=styled(WalletDialogButton)(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  height: 60px;\\n  margin-top: 10px;\\n  margin-bottom: 5px;\\n  background: linear-gradient(180deg, #604ae5 0%, #813eee 100%);\\n  color: white;\\n  font-size: 16px;\\n  font-weight: bold;\\n\"])));var MintContainer=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\"])));// add your styles here\nvar dialogStyles=function dialogStyles(theme){return createStyles({root:{margin:0,padding:theme.spacing(2)},closeButton:{position:'absolute',right:theme.spacing(1),top:theme.spacing(1),color:theme.palette.grey[500]}});};var ValueSlider=styled(Slider)({color:'#C0D5FE',height:8,'& > *':{height:4},'& .MuiSlider-track':{border:'none',height:4},'& .MuiSlider-thumb':{height:24,width:24,marginTop:-10,background:'linear-gradient(180deg, #604AE5 0%, #813EEE 100%)',border:'2px solid currentColor','&:focus, &:hover, &.Mui-active, &.Mui-focusVisible':{boxShadow:'inherit'},'&:before':{display:'none'}},'& .MuiSlider-valueLabel':{'& > *':{background:'linear-gradient(180deg, #604AE5 0%, #813EEE 100%)'},lineHeight:1.2,fontSize:12,padding:0,width:32,height:32,marginLeft:9}});var FAIR_LAUNCH_LOTTERY_SIZE=8+// discriminator\n32+// fair launch\n1+// bump\n8;// size of bitmask ones\nvar isWinner=function isWinner(fairLaunch){var _fairLaunch$ticket$da,_fairLaunch$ticket$da2,_fairLaunch$ticket$da3;if(!(fairLaunch!==null&&fairLaunch!==void 0&&fairLaunch.lottery.data)||!(fairLaunch!==null&&fairLaunch!==void 0&&fairLaunch.lottery.data.length)||!(fairLaunch!==null&&fairLaunch!==void 0&&(_fairLaunch$ticket$da=fairLaunch.ticket.data)!==null&&_fairLaunch$ticket$da!==void 0&&_fairLaunch$ticket$da.seq)||!(fairLaunch!==null&&fairLaunch!==void 0&&fairLaunch.state.phaseThreeStarted)){return false;}var myByte=fairLaunch.lottery.data[FAIR_LAUNCH_LOTTERY_SIZE+Math.floor(((_fairLaunch$ticket$da2=fairLaunch.ticket.data)===null||_fairLaunch$ticket$da2===void 0?void 0:_fairLaunch$ticket$da2.seq.toNumber())/8)];var positionFromRight=7-((_fairLaunch$ticket$da3=fairLaunch.ticket.data)===null||_fairLaunch$ticket$da3===void 0?void 0:_fairLaunch$ticket$da3.seq.toNumber())%8;var mask=Math.pow(2,positionFromRight);var isWinner=myByte&mask;return isWinner>0;};var Home=function Home(props){var _fairLaunch$ticket,_fairLaunch$ticket$da5,_fairLaunch$ticket$da6,_fairLaunch$state,_fairLaunch$state$dat,_fairLaunch$state2,_fairLaunch$state2$da,_fairLaunch$ticket2,_fairLaunch$ticket2$d,_fairLaunch$ticket3,_fairLaunch$ticket3$d,_fairLaunch$ticket4,_fairLaunch$ticket4$d,_fairLaunch$ticket5,_fairLaunch$ticket5$d,_fairLaunch$ticket6,_fairLaunch$ticket6$d,_fairLaunch$ticket7,_fairLaunch$ticket7$d,_fairLaunch$ticket8,_fairLaunch$ticket8$d,_fairLaunch$ticket$da7,_fairLaunch$ticket$da8,_candyMachine$state,_candyMachine$state$g,_fairLaunch$ticket$da9,_fairLaunch$state3,_fairLaunch$state3$da,_fairLaunch$state4,_fairLaunch$state4$da,_toDate;var _useState=useState(0),_useState2=_slicedToArray(_useState,2),fairLaunchBalance=_useState2[0],setFairLaunchBalance=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),yourSOLBalance=_useState4[0],setYourSOLBalance=_useState4[1];var rpcUrl=props.rpcHost;var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isMinting=_useState6[0],setIsMinting=_useState6[1];// true when user got to press MINT\nvar _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),contributed=_useState8[0],setContributed=_useState8[1];var wallet=useWallet();var anchorWallet=useMemo(function(){if(!wallet||!wallet.publicKey||!wallet.signAllTransactions||!wallet.signTransaction){return;}return{publicKey:wallet.publicKey,signAllTransactions:wallet.signAllTransactions,signTransaction:wallet.signTransaction};},[wallet]);var _useState9=useState({open:false,message:'',severity:undefined}),_useState10=_slicedToArray(_useState9,2),alertState=_useState10[0],setAlertState=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),fairLaunch=_useState12[0],setFairLaunch=_useState12[1];var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),candyMachine=_useState14[0],setCandyMachine=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),howToOpen=_useState16[0],setHowToOpen=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),refundExplainerOpen=_useState18[0],setRefundExplainerOpen=_useState18[1];var onMint=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _document$getElementB,_fairLaunch$ticket$da4,_status,mintTxId,status,message;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;setIsMinting(true);(_document$getElementB=document.getElementById('#identity'))===null||_document$getElementB===void 0?void 0:_document$getElementB.click();if(!(wallet.connected&&candyMachine!==null&&candyMachine!==void 0&&candyMachine.program&&wallet.publicKey)){_context.next=16;break;}if(!(fairLaunch!==null&&fairLaunch!==void 0&&(_fairLaunch$ticket$da4=fairLaunch.ticket.data)!==null&&_fairLaunch$ticket$da4!==void 0&&_fairLaunch$ticket$da4.state.unpunched&&isWinner(fairLaunch))){_context.next=7;break;}_context.next=7;return onPunchTicket();case 7:_context.next=9;return mintOneToken(candyMachine,wallet.publicKey);case 9:mintTxId=_context.sent[0];status={err:true};if(!mintTxId){_context.next=15;break;}_context.next=14;return awaitTransactionSignatureConfirmation(mintTxId,props.txTimeout,props.connection,'singleGossip',true);case 14:status=_context.sent;case 15:if(!((_status=status)!==null&&_status!==void 0&&_status.err)){setAlertState({open:true,message:'Congratulations! Mint succeeded!',severity:'success'});}else{setAlertState({open:true,message:'Mint failed! Please try again!',severity:'error'});}case 16:_context.next=23;break;case 18:_context.prev=18;_context.t0=_context[\"catch\"](0);// TODO: blech:\nmessage=_context.t0.msg||'Minting failed! Please try again!';if(!_context.t0.msg){if(!_context.t0.message){message='Transaction Timeout! Please try again.';}else if(_context.t0.message.indexOf('0x138')){}else if(_context.t0.message.indexOf('0x137')){message=\"SOLD OUT!\";}else if(_context.t0.message.indexOf('0x135')){message=\"Insufficient funds to mint. Please fund your wallet.\";}}else{if(_context.t0.code===311){message=\"SOLD OUT!\";window.location.reload();}else if(_context.t0.code===312){message=\"Minting period hasn't started yet.\";}}setAlertState({open:true,message:message,severity:'error'});case 23:_context.prev=23;setIsMinting(false);return _context.finish(23);case 26:case\"end\":return _context.stop();}}},_callee,null,[[0,18,23,26]]);}));return function onMint(){return _ref.apply(this,arguments);};}();useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var balance,state,_fairLaunchBalance,_phase,ticks,randomTick,cndy;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(anchorWallet){_context2.next=2;break;}return _context2.abrupt(\"return\");case 2:_context2.prev=2;_context2.next=5;return props.connection.getBalance(anchorWallet.publicKey);case 5:balance=_context2.sent;setYourSOLBalance(balance);if(!props.fairLaunchId){_context2.next=31;break;}_context2.next=10;return getFairLaunchState(anchorWallet,props.fairLaunchId,props.connection);case 10:state=_context2.sent;setFairLaunch(state);_context2.prev=12;if(!state.state.tokenMint){_context2.next=22;break;}_context2.t0=props.connection;_context2.next=17;return getAtaForMint(state.state.tokenMint,anchorWallet.publicKey);case 17:_context2.t1=_context2.sent[0];_context2.next=20;return _context2.t0.getTokenAccountBalance.call(_context2.t0,_context2.t1);case 20:_fairLaunchBalance=_context2.sent;if(_fairLaunchBalance.value){setFairLaunchBalance(_fairLaunchBalance.value.uiAmount||0);}case 22:_context2.next=28;break;case 24:_context2.prev=24;_context2.t2=_context2[\"catch\"](12);console.log('Problem getting fair launch token balance');console.log(_context2.t2);case 28:if(contributed===0){_phase=getPhase(state,undefined);if(_phase===Phase.SetPrice){ticks=(state.state.data.priceRangeEnd.toNumber()-state.state.data.priceRangeStart.toNumber())/state.state.data.tickSize.toNumber();randomTick=Math.round(Math.random()*ticks);setContributed((state.state.data.priceRangeStart.toNumber()+randomTick*state.state.data.tickSize.toNumber())/LAMPORTS_PER_SOL);}else{setContributed((state.state.currentMedian||state.state.data.priceRangeStart).toNumber()/LAMPORTS_PER_SOL);}}_context2.next=32;break;case 31:console.log('No fair launch detected in configuration.');case 32:_context2.next=38;break;case 34:_context2.prev=34;_context2.t3=_context2[\"catch\"](2);console.log('Problem getting fair launch state');console.log(_context2.t3);case 38:if(!props.candyMachineId){_context2.next=52;break;}_context2.prev=39;_context2.next=42;return getCandyMachineState(anchorWallet,props.candyMachineId,props.connection);case 42:cndy=_context2.sent;setCandyMachine(cndy);_context2.next=50;break;case 46:_context2.prev=46;_context2.t4=_context2[\"catch\"](39);console.log('Problem getting candy machine state');console.log(_context2.t4);case 50:_context2.next=53;break;case 52:console.log('No candy machine detected in configuration.');case 53:case\"end\":return _context2.stop();}}},_callee2,null,[[2,34],[12,24],[39,46]]);}))();},[anchorWallet,props.candyMachineId,props.connection,props.fairLaunchId,contributed]);var min=formatNumber.asNumber(fairLaunch===null||fairLaunch===void 0?void 0:fairLaunch.state.data.priceRangeStart);var max=formatNumber.asNumber(fairLaunch===null||fairLaunch===void 0?void 0:fairLaunch.state.data.priceRangeEnd);var step=formatNumber.asNumber(fairLaunch===null||fairLaunch===void 0?void 0:fairLaunch.state.data.tickSize);var median=formatNumber.asNumber(fairLaunch===null||fairLaunch===void 0?void 0:fairLaunch.state.currentMedian);var phase=getPhase(fairLaunch,candyMachine);console.log('Phase',phase);var marks=[{value:min||0,label:\"\".concat(min,\" SOL\")}].concat(_toConsumableArray(phase===Phase.SetPrice?[]:[{value:median||0,label:\"\".concat(median)}]),[// display user comitted value\n// {\n//   value: 37,\n//   label: '37°C',\n// },\n{value:max||0,label:\"\".concat(max,\" SOL\")}]).filter(function(_){return _!==undefined&&_.value!==0;});var onDeposit=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(anchorWallet){_context3.next=2;break;}return _context3.abrupt(\"return\");case 2:console.log('deposit');setIsMinting(true);_context3.prev=4;_context3.next=7;return purchaseTicket(contributed,anchorWallet,fairLaunch);case 7:setIsMinting(false);setAlertState({open:true,message:\"Congratulations! Bid \".concat(fairLaunch!==null&&fairLaunch!==void 0&&fairLaunch.ticket.data?'updated':'inserted',\"!\"),severity:'success'});_context3.next=16;break;case 11:_context3.prev=11;_context3.t0=_context3[\"catch\"](4);console.log(_context3.t0);setIsMinting(false);setAlertState({open:true,message:'Something went wrong.',severity:'error'});case 16:case\"end\":return _context3.stop();}}},_callee3,null,[[4,11]]);}));return function onDeposit(){return _ref3.apply(this,arguments);};}();var onRefundTicket=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:if(anchorWallet){_context4.next=2;break;}return _context4.abrupt(\"return\");case 2:console.log('refund');_context4.prev=3;setIsMinting(true);_context4.next=7;return purchaseTicket(0,anchorWallet,fairLaunch);case 7:setIsMinting(false);setAlertState({open:true,message:'Congratulations! Funds withdrawn. This is an irreversible action.',severity:'success'});_context4.next=16;break;case 11:_context4.prev=11;_context4.t0=_context4[\"catch\"](3);console.log(_context4.t0);setIsMinting(false);setAlertState({open:true,message:'Something went wrong.',severity:'error'});case 16:case\"end\":return _context4.stop();}}},_callee4,null,[[3,11]]);}));return function onRefundTicket(){return _ref4.apply(this,arguments);};}();var onPunchTicket=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(!(!anchorWallet||!fairLaunch||!fairLaunch.ticket)){_context5.next=2;break;}return _context5.abrupt(\"return\");case 2:console.log('punch');setIsMinting(true);_context5.prev=4;_context5.next=7;return punchTicket(anchorWallet,fairLaunch);case 7:setIsMinting(false);setAlertState({open:true,message:'Congratulations! Ticket punched!',severity:'success'});_context5.next=16;break;case 11:_context5.prev=11;_context5.t0=_context5[\"catch\"](4);console.log(_context5.t0);setIsMinting(false);setAlertState({open:true,message:'Something went wrong.',severity:'error'});case 16:case\"end\":return _context5.stop();}}},_callee5,null,[[4,11]]);}));return function onPunchTicket(){return _ref5.apply(this,arguments);};}();var candyMachinePredatesFairLaunch=(candyMachine===null||candyMachine===void 0?void 0:candyMachine.state.goLiveDate)&&(fairLaunch===null||fairLaunch===void 0?void 0:fairLaunch.state.data.phaseTwoEnd)&&(candyMachine===null||candyMachine===void 0?void 0:candyMachine.state.goLiveDate.lt(fairLaunch===null||fairLaunch===void 0?void 0:fairLaunch.state.data.phaseTwoEnd));var notEnoughSOL=!!(yourSOLBalance!=null&&fairLaunch!==null&&fairLaunch!==void 0&&fairLaunch.state.data.priceRangeStart&&fairLaunch!==null&&fairLaunch!==void 0&&fairLaunch.state.data.fee&&yourSOLBalance+((fairLaunch===null||fairLaunch===void 0?void 0:(_fairLaunch$ticket=fairLaunch.ticket)===null||_fairLaunch$ticket===void 0?void 0:(_fairLaunch$ticket$da5=_fairLaunch$ticket.data)===null||_fairLaunch$ticket$da5===void 0?void 0:_fairLaunch$ticket$da5.amount.toNumber())||0)<contributed*LAMPORTS_PER_SOL+(fairLaunch===null||fairLaunch===void 0?void 0:fairLaunch.state.data.fee.toNumber())+0.01);return/*#__PURE__*/_jsxs(Container,{style:{marginTop:100},children:[fairLaunch&&/*#__PURE__*/_jsx(AntiRug,{fairLaunch:fairLaunch,isMinting:[isMinting,setIsMinting],setAlertState:setAlertState}),/*#__PURE__*/_jsx(Container,{maxWidth:\"xs\",style:{position:'relative'},children:/*#__PURE__*/_jsx(Paper,{style:{padding:24,backgroundColor:'#151A1F',borderRadius:6},children:/*#__PURE__*/_jsxs(Grid,{container:true,justifyContent:\"center\",direction:\"column\",children:[/*#__PURE__*/_jsx(PhaseHeader,{phase:phase,fairLaunch:fairLaunch,candyMachine:candyMachine,rpcUrl:rpcUrl,candyMachinePredatesFairLaunch:!!candyMachinePredatesFairLaunch}),fairLaunch&&/*#__PURE__*/_jsx(Grid,{container:true,direction:\"column\",justifyContent:\"center\",alignItems:\"center\",style:{height:200,marginTop:20,marginBottom:20,background:'#384457',borderRadius:6},children:fairLaunch.ticket.data?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Typography,{children:\"Your bid\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",style:{fontWeight:900},children:[formatNumber.format(((fairLaunch===null||fairLaunch===void 0?void 0:(_fairLaunch$ticket$da6=fairLaunch.ticket.data)===null||_fairLaunch$ticket$da6===void 0?void 0:_fairLaunch$ticket$da6.amount.toNumber())||0)/LAMPORTS_PER_SOL),' ',\"SOL\"]})]}):[Phase.AnticipationPhase,Phase.SetPrice].includes(phase)?/*#__PURE__*/_jsxs(Typography,{children:[\"You haven't entered this raffle yet. \",/*#__PURE__*/_jsx(\"br\",{}),(fairLaunch===null||fairLaunch===void 0?void 0:(_fairLaunch$state=fairLaunch.state)===null||_fairLaunch$state===void 0?void 0:(_fairLaunch$state$dat=_fairLaunch$state.data)===null||_fairLaunch$state$dat===void 0?void 0:_fairLaunch$state$dat.fee)&&/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsxs(\"b\",{children:[\"All initial bids will incur a \\u25CE\",' ',(fairLaunch===null||fairLaunch===void 0?void 0:(_fairLaunch$state2=fairLaunch.state)===null||_fairLaunch$state2===void 0?void 0:(_fairLaunch$state2$da=_fairLaunch$state2.data)===null||_fairLaunch$state2$da===void 0?void 0:_fairLaunch$state2$da.fee.toNumber())/LAMPORTS_PER_SOL,' ',\"fee.\"]})})]}):/*#__PURE__*/_jsx(Typography,{children:\"You didn't participate in this raffle.\"})}),fairLaunch&&/*#__PURE__*/_jsxs(_Fragment,{children:[[Phase.SetPrice,Phase.GracePeriod,Phase.RaffleFinished,Phase.Lottery].includes(phase)&&(fairLaunch===null||fairLaunch===void 0?void 0:(_fairLaunch$ticket2=fairLaunch.ticket)===null||_fairLaunch$ticket2===void 0?void 0:(_fairLaunch$ticket2$d=_fairLaunch$ticket2.data)===null||_fairLaunch$ticket2$d===void 0?void 0:_fairLaunch$ticket2$d.state.withdrawn)&&/*#__PURE__*/_jsx(\"div\",{style:{paddingTop:'15px'},children:/*#__PURE__*/_jsx(Alert,{severity:\"error\",children:\"Your bid was withdrawn and cannot be adjusted or re-inserted.\"})}),[Phase.GracePeriod].includes(phase)&&fairLaunch.state.currentMedian&&(fairLaunch===null||fairLaunch===void 0?void 0:(_fairLaunch$ticket3=fairLaunch.ticket)===null||_fairLaunch$ticket3===void 0?void 0:(_fairLaunch$ticket3$d=_fairLaunch$ticket3.data)===null||_fairLaunch$ticket3$d===void 0?void 0:_fairLaunch$ticket3$d.amount)&&!(fairLaunch!==null&&fairLaunch!==void 0&&(_fairLaunch$ticket4=fairLaunch.ticket)!==null&&_fairLaunch$ticket4!==void 0&&(_fairLaunch$ticket4$d=_fairLaunch$ticket4.data)!==null&&_fairLaunch$ticket4$d!==void 0&&_fairLaunch$ticket4$d.state.withdrawn)&&fairLaunch.state.currentMedian.gt(fairLaunch===null||fairLaunch===void 0?void 0:(_fairLaunch$ticket5=fairLaunch.ticket)===null||_fairLaunch$ticket5===void 0?void 0:(_fairLaunch$ticket5$d=_fairLaunch$ticket5.data)===null||_fairLaunch$ticket5$d===void 0?void 0:_fairLaunch$ticket5$d.amount)&&/*#__PURE__*/_jsx(\"div\",{style:{paddingTop:'15px'},children:/*#__PURE__*/_jsx(Alert,{severity:\"warning\",children:\"Your bid is currently below the median and will not be eligible for the raffle.\"})}),[Phase.RaffleFinished,Phase.Lottery].includes(phase)&&fairLaunch.state.currentMedian&&(fairLaunch===null||fairLaunch===void 0?void 0:(_fairLaunch$ticket6=fairLaunch.ticket)===null||_fairLaunch$ticket6===void 0?void 0:(_fairLaunch$ticket6$d=_fairLaunch$ticket6.data)===null||_fairLaunch$ticket6$d===void 0?void 0:_fairLaunch$ticket6$d.amount)&&!(fairLaunch!==null&&fairLaunch!==void 0&&(_fairLaunch$ticket7=fairLaunch.ticket)!==null&&_fairLaunch$ticket7!==void 0&&(_fairLaunch$ticket7$d=_fairLaunch$ticket7.data)!==null&&_fairLaunch$ticket7$d!==void 0&&_fairLaunch$ticket7$d.state.withdrawn)&&fairLaunch.state.currentMedian.gt(fairLaunch===null||fairLaunch===void 0?void 0:(_fairLaunch$ticket8=fairLaunch.ticket)===null||_fairLaunch$ticket8===void 0?void 0:(_fairLaunch$ticket8$d=_fairLaunch$ticket8.data)===null||_fairLaunch$ticket8$d===void 0?void 0:_fairLaunch$ticket8$d.amount)&&/*#__PURE__*/_jsx(\"div\",{style:{paddingTop:'15px'},children:/*#__PURE__*/_jsxs(Alert,{severity:\"error\",children:[\"Your bid was below the median and was not included in the raffle. You may click \",/*#__PURE__*/_jsx(\"em\",{children:\"Withdraw\"}),\" when the raffle ends or you will be automatically issued one when the Fair Launch authority withdraws from the treasury.\"]})}),notEnoughSOL&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",children:\"You do not have enough SOL in your account to place this bid.\"})]}),[Phase.SetPrice,Phase.GracePeriod].includes(phase)&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(Grid,{style:{marginTop:40,marginBottom:20},children:contributed>0?/*#__PURE__*/_jsx(ValueSlider,{min:min,marks:marks,max:max,step:step,value:contributed,onChange:function onChange(ev,val){return setContributed(val);},valueLabelDisplay:\"auto\",style:{width:'calc(100% - 40px)',marginLeft:20,height:30}}):/*#__PURE__*/_jsx(\"div\",{style:{display:'flex',justifyContent:'center',alignItems:'center'},children:/*#__PURE__*/_jsx(CircularProgress,{})})})}),!wallet.connected?/*#__PURE__*/_jsxs(ConnectButton,{children:[\"Connect\",' ',[Phase.SetPrice].includes(phase)?'to bid':'to see status']}):/*#__PURE__*/_jsxs(\"div\",{children:[[Phase.SetPrice,Phase.GracePeriod].includes(phase)&&/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(CTAButton,{onClick:onDeposit,variant:\"contained\",disabled:isMinting||!(fairLaunch!==null&&fairLaunch!==void 0&&fairLaunch.ticket.data)&&phase===Phase.GracePeriod||notEnoughSOL,children:isMinting?/*#__PURE__*/_jsx(CircularProgress,{}):!(fairLaunch!==null&&fairLaunch!==void 0&&fairLaunch.ticket.data)?'Place bid':'Change bid'})}),[Phase.RaffleFinished].includes(phase)&&/*#__PURE__*/_jsxs(_Fragment,{children:[isWinner(fairLaunch)&&/*#__PURE__*/_jsx(CTAButton,{onClick:onPunchTicket,variant:\"contained\",disabled:(fairLaunch===null||fairLaunch===void 0?void 0:(_fairLaunch$ticket$da7=fairLaunch.ticket.data)===null||_fairLaunch$ticket$da7===void 0?void 0:_fairLaunch$ticket$da7.state.punched)!==undefined,children:isMinting?/*#__PURE__*/_jsx(CircularProgress,{}):'Punch Ticket'}),!isWinner(fairLaunch)&&/*#__PURE__*/_jsx(CTAButton,{onClick:onRefundTicket,variant:\"contained\",disabled:isMinting||(fairLaunch===null||fairLaunch===void 0?void 0:fairLaunch.ticket.data)===undefined||(fairLaunch===null||fairLaunch===void 0?void 0:(_fairLaunch$ticket$da8=fairLaunch.ticket.data)===null||_fairLaunch$ticket$da8===void 0?void 0:_fairLaunch$ticket$da8.state.withdrawn)!==undefined,children:isMinting?/*#__PURE__*/_jsx(CircularProgress,{}):'Withdraw'})]}),phase===Phase.Phase4&&/*#__PURE__*/_jsxs(_Fragment,{children:[(!fairLaunch||isWinner(fairLaunch)||fairLaunchBalance>0)&&/*#__PURE__*/_jsx(MintContainer,{children:candyMachine!==null&&candyMachine!==void 0&&candyMachine.state.isActive&&candyMachine!==null&&candyMachine!==void 0&&candyMachine.state.gatekeeper&&wallet.publicKey&&wallet.signTransaction?/*#__PURE__*/_jsx(GatewayProvider,{wallet:{publicKey:wallet.publicKey||new PublicKey(CANDY_MACHINE_PROGRAM),//@ts-ignore\nsignTransaction:wallet.signTransaction}// // Replace with following when added\n// gatekeeperNetwork={candyMachine.state.gatekeeper_network}\n,gatekeeperNetwork:candyMachine===null||candyMachine===void 0?void 0:(_candyMachine$state=candyMachine.state)===null||_candyMachine$state===void 0?void 0:(_candyMachine$state$g=_candyMachine$state.gatekeeper)===null||_candyMachine$state$g===void 0?void 0:_candyMachine$state$g.gatekeeperNetwork// This is the ignite (captcha) network\n/// Don't need this for mainnet\n,clusterUrl:rpcUrl,options:{autoShowModal:false},children:/*#__PURE__*/_jsx(MintButton,{candyMachine:candyMachine,fairLaunch:fairLaunch,isMinting:isMinting,fairLaunchBalance:fairLaunchBalance,onMint:onMint})}):/*#__PURE__*/_jsx(MintButton,{candyMachine:candyMachine,fairLaunch:fairLaunch,isMinting:isMinting,fairLaunchBalance:fairLaunchBalance,onMint:onMint})}),!(!fairLaunch||isWinner(fairLaunch)||fairLaunchBalance>0)&&/*#__PURE__*/_jsx(CTAButton,{onClick:onRefundTicket,variant:\"contained\",disabled:isMinting||(fairLaunch===null||fairLaunch===void 0?void 0:fairLaunch.ticket.data)===undefined||(fairLaunch===null||fairLaunch===void 0?void 0:(_fairLaunch$ticket$da9=fairLaunch.ticket.data)===null||_fairLaunch$ticket$da9===void 0?void 0:_fairLaunch$ticket$da9.state.withdrawn)!==undefined,children:isMinting?/*#__PURE__*/_jsx(CircularProgress,{}):'Withdraw'})]})]}),/*#__PURE__*/_jsxs(Grid,{container:true,justifyContent:\"space-between\",color:\"textSecondary\",children:[fairLaunch&&/*#__PURE__*/_jsx(Link,{component:\"button\",variant:\"body2\",color:\"textSecondary\",align:\"left\",onClick:function onClick(){setHowToOpen(true);},children:\"How this raffle works\"}),(fairLaunch===null||fairLaunch===void 0?void 0:fairLaunch.ticket.data)&&/*#__PURE__*/_jsx(Link,{component:\"button\",variant:\"body2\",color:\"textSecondary\",align:\"right\",onClick:function onClick(){if(!fairLaunch||phase===Phase.Lottery||isWinner(fairLaunch)||fairLaunchBalance>0){setRefundExplainerOpen(true);}else{onRefundTicket();}},children:\"Withdraw funds\"})]}),/*#__PURE__*/_jsx(Dialog,{open:refundExplainerOpen,onClose:function onClose(){return setRefundExplainerOpen(false);},PaperProps:{style:{backgroundColor:'#222933',borderRadius:6}},children:/*#__PURE__*/_jsx(MuiDialogContent,{style:{padding:24},children:\"During raffle phases, or if you are a winner, or if this website is not configured to be a fair launch but simply a candy machine, refunds are disallowed.\"})}),/*#__PURE__*/_jsxs(Dialog,{open:howToOpen,onClose:function onClose(){return setHowToOpen(false);},PaperProps:{style:{backgroundColor:'#222933',borderRadius:6}},children:[/*#__PURE__*/_jsxs(MuiDialogTitle,{disableTypography:true,style:{display:'flex',alignItems:'center',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(Link,{component:\"button\",variant:\"h6\",color:\"textSecondary\",onClick:function onClick(){setHowToOpen(true);},children:\"How it works\"}),/*#__PURE__*/_jsx(IconButton,{\"aria-label\":\"close\",className:dialogStyles.closeButton,onClick:function onClick(){return setHowToOpen(false);},children:/*#__PURE__*/_jsx(CloseIcon,{})})]}),/*#__PURE__*/_jsxs(MuiDialogContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Phase 1 - Set the fair price:\"}),/*#__PURE__*/_jsxs(Typography,{gutterBottom:true,color:\"textSecondary\",children:[\"Enter a bid in the range provided by the artist. The median of all bids will be the \\\"fair\\\" price of the raffle ticket.\",' ',(fairLaunch===null||fairLaunch===void 0?void 0:(_fairLaunch$state3=fairLaunch.state)===null||_fairLaunch$state3===void 0?void 0:(_fairLaunch$state3$da=_fairLaunch$state3.data)===null||_fairLaunch$state3$da===void 0?void 0:_fairLaunch$state3$da.fee)&&/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsxs(\"b\",{children:[\"All bids will incur a \\u25CE\",' ',(fairLaunch===null||fairLaunch===void 0?void 0:(_fairLaunch$state4=fairLaunch.state)===null||_fairLaunch$state4===void 0?void 0:(_fairLaunch$state4$da=_fairLaunch$state4.data)===null||_fairLaunch$state4$da===void 0?void 0:_fairLaunch$state4$da.fee.toNumber())/LAMPORTS_PER_SOL,' ',\"fee.\"]})})]}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Phase 2 - Grace period:\"}),/*#__PURE__*/_jsx(Typography,{gutterBottom:true,color:\"textSecondary\",children:\"If your bid was at or above the fair price, you automatically get a raffle ticket at that price. There's nothing else you need to do. Your excess SOL will be returned to you when the Fair Launch authority withdraws from the treasury. If your bid is below the median price, you can still opt in at the fair price during this phase.\"}),candyMachinePredatesFairLaunch?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Phase 3 - The Candy Machine:\"}),/*#__PURE__*/_jsx(Typography,{gutterBottom:true,color:\"textSecondary\",children:\"Everyone who got a raffle ticket at the fair price is entered to win an NFT. If you win an NFT, congrats. If you don\\u2019t, no worries, your SOL will go right back into your wallet.\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Phase 3 - The Lottery:\"}),/*#__PURE__*/_jsx(Typography,{gutterBottom:true,color:\"textSecondary\",children:\"Everyone who got a raffle ticket at the fair price is entered to win a Fair Launch Token that entitles them to an NFT at a later date using a Candy Machine here. If you don\\u2019t win, no worries, your SOL will go right back into your wallet.\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Phase 4 - The Candy Machine:\"}),/*#__PURE__*/_jsxs(Typography,{gutterBottom:true,color:\"textSecondary\",children:[\"On\",' ',candyMachine!==null&&candyMachine!==void 0&&candyMachine.state.goLiveDate?(_toDate=toDate(candyMachine===null||candyMachine===void 0?void 0:candyMachine.state.goLiveDate))===null||_toDate===void 0?void 0:_toDate.toLocaleString():' some later date',\", you will be able to exchange your Fair Launch token for an NFT using the Candy Machine at this site by pressing the Mint Button.\"]})]})]})]})]})})}),fairLaunch&&/*#__PURE__*/_jsx(Container,{maxWidth:\"xs\",style:{position:'relative',marginTop:10},children:/*#__PURE__*/_jsx(\"div\",{style:{margin:20},children:/*#__PURE__*/_jsxs(Grid,{container:true,direction:\"row\",wrap:\"nowrap\",children:[/*#__PURE__*/_jsxs(Grid,{container:true,md:4,direction:\"column\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:\"Bids\"}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",color:\"textPrimary\",style:{fontWeight:'bold'},children:(fairLaunch===null||fairLaunch===void 0?void 0:fairLaunch.state.numberTicketsSold.toNumber())||0})]}),/*#__PURE__*/_jsxs(Grid,{container:true,md:4,direction:\"column\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:\"Median bid\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",color:\"textPrimary\",style:{fontWeight:'bold'},children:[\"\\u25CE\",' ',phase===Phase.AnticipationPhase||phase===Phase.SetPrice?'???':formatNumber.format(median)]})]}),/*#__PURE__*/_jsxs(Grid,{container:true,md:4,direction:\"column\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"textSecondary\",children:\"Total raised\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",color:\"textPrimary\",style:{fontWeight:'bold'},children:[\"\\u25CE\",' ',formatNumber.format(((fairLaunch===null||fairLaunch===void 0?void 0:fairLaunch.treasury)||0)/LAMPORTS_PER_SOL)]})]})]})})}),/*#__PURE__*/_jsx(Snackbar,{open:alertState.open,autoHideDuration:6000,onClose:function onClose(){return setAlertState(_objectSpread(_objectSpread({},alertState),{},{open:false}));},children:/*#__PURE__*/_jsx(Alert,{onClose:function onClose(){return setAlertState(_objectSpread(_objectSpread({},alertState),{},{open:false}));},severity:alertState.severity,children:alertState.message})})]});};export default Home;","map":{"version":3,"sources":["C:/Users/User/~/metaplex/fair-launch/src/Home.tsx"],"names":["useEffect","useMemo","useState","styled","CircularProgress","Container","IconButton","Link","Slider","Snackbar","Paper","Typography","Grid","createStyles","Dialog","MuiDialogTitle","MuiDialogContent","CloseIcon","Alert","LAMPORTS_PER_SOL","PublicKey","useWallet","WalletDialogButton","awaitTransactionSignatureConfirmation","CANDY_MACHINE_PROGRAM","getCandyMachineState","mintOneToken","getFairLaunchState","punchTicket","purchaseTicket","formatNumber","getAtaForMint","toDate","CTAButton","MintButton","AntiRug","getPhase","Phase","PhaseHeader","GatewayProvider","ConnectButton","MintContainer","div","dialogStyles","theme","root","margin","padding","spacing","closeButton","position","right","top","color","palette","grey","ValueSlider","height","border","width","marginTop","background","boxShadow","display","lineHeight","fontSize","marginLeft","FAIR_LAUNCH_LOTTERY_SIZE","isWinner","fairLaunch","lottery","data","length","ticket","seq","state","phaseThreeStarted","myByte","Math","floor","toNumber","positionFromRight","mask","pow","Home","props","fairLaunchBalance","setFairLaunchBalance","yourSOLBalance","setYourSOLBalance","rpcUrl","rpcHost","isMinting","setIsMinting","contributed","setContributed","wallet","anchorWallet","publicKey","signAllTransactions","signTransaction","open","message","severity","undefined","alertState","setAlertState","setFairLaunch","candyMachine","setCandyMachine","howToOpen","setHowToOpen","refundExplainerOpen","setRefundExplainerOpen","onMint","document","getElementById","click","connected","program","unpunched","onPunchTicket","mintTxId","status","err","txTimeout","connection","msg","indexOf","code","window","location","reload","getBalance","balance","fairLaunchId","tokenMint","getTokenAccountBalance","value","uiAmount","console","log","phase","SetPrice","ticks","priceRangeEnd","priceRangeStart","tickSize","randomTick","round","random","currentMedian","candyMachineId","cndy","min","asNumber","max","step","median","marks","label","filter","_","onDeposit","onRefundTicket","candyMachinePredatesFairLaunch","goLiveDate","phaseTwoEnd","lt","notEnoughSOL","fee","amount","backgroundColor","borderRadius","marginBottom","fontWeight","format","AnticipationPhase","includes","GracePeriod","RaffleFinished","Lottery","withdrawn","paddingTop","gt","ev","val","justifyContent","alignItems","punched","Phase4","isActive","gatekeeper","gatekeeperNetwork","autoShowModal","style","toLocaleString","numberTicketsSold","treasury"],"mappings":"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","sourcesContent":["import { useEffect, useMemo, useState } from 'react';\r\nimport styled from 'styled-components';\r\nimport {\r\n  CircularProgress,\r\n  Container,\r\n  IconButton,\r\n  Link,\r\n  Slider,\r\n  Snackbar,\r\n} from '@material-ui/core';\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { createStyles, Theme } from '@material-ui/core/styles';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport MuiDialogTitle from '@material-ui/core/DialogTitle';\r\nimport MuiDialogContent from '@material-ui/core/DialogContent';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nimport Alert from '@material-ui/lab/Alert';\r\n\r\nimport * as anchor from '@project-serum/anchor';\r\n\r\nimport { LAMPORTS_PER_SOL, PublicKey } from '@solana/web3.js';\r\n\r\nimport { useWallet } from '@solana/wallet-adapter-react';\r\nimport { WalletDialogButton } from '@solana/wallet-adapter-material-ui';\r\n\r\nimport {\r\n  awaitTransactionSignatureConfirmation,\r\n  CandyMachineAccount,\r\n  CANDY_MACHINE_PROGRAM,\r\n  getCandyMachineState,\r\n  mintOneToken,\r\n} from './candy-machine';\r\n\r\nimport {\r\n  FairLaunchAccount,\r\n  getFairLaunchState,\r\n  punchTicket,\r\n  purchaseTicket,\r\n} from './fair-launch';\r\n\r\nimport { AlertState, formatNumber, getAtaForMint, toDate } from './utils';\r\nimport { CTAButton, MintButton } from './MintButton';\r\nimport { AntiRug } from './AntiRug';\r\nimport { getPhase, Phase, PhaseHeader } from './PhaseHeader';\r\nimport { GatewayProvider } from '@civic/solana-gateway-react';\r\n\r\nconst ConnectButton = styled(WalletDialogButton)`\r\n  width: 100%;\r\n  height: 60px;\r\n  margin-top: 10px;\r\n  margin-bottom: 5px;\r\n  background: linear-gradient(180deg, #604ae5 0%, #813eee 100%);\r\n  color: white;\r\n  font-size: 16px;\r\n  font-weight: bold;\r\n`;\r\n\r\nconst MintContainer = styled.div``; // add your styles here\r\n\r\nconst dialogStyles: any = (theme: Theme) =>\r\n  createStyles({\r\n    root: {\r\n      margin: 0,\r\n      padding: theme.spacing(2),\r\n    },\r\n    closeButton: {\r\n      position: 'absolute',\r\n      right: theme.spacing(1),\r\n      top: theme.spacing(1),\r\n      color: theme.palette.grey[500],\r\n    },\r\n  });\r\n\r\nconst ValueSlider = styled(Slider)({\r\n  color: '#C0D5FE',\r\n  height: 8,\r\n  '& > *': {\r\n    height: 4,\r\n  },\r\n  '& .MuiSlider-track': {\r\n    border: 'none',\r\n    height: 4,\r\n  },\r\n  '& .MuiSlider-thumb': {\r\n    height: 24,\r\n    width: 24,\r\n    marginTop: -10,\r\n    background: 'linear-gradient(180deg, #604AE5 0%, #813EEE 100%)',\r\n    border: '2px solid currentColor',\r\n    '&:focus, &:hover, &.Mui-active, &.Mui-focusVisible': {\r\n      boxShadow: 'inherit',\r\n    },\r\n    '&:before': {\r\n      display: 'none',\r\n    },\r\n  },\r\n  '& .MuiSlider-valueLabel': {\r\n    '& > *': {\r\n      background: 'linear-gradient(180deg, #604AE5 0%, #813EEE 100%)',\r\n    },\r\n    lineHeight: 1.2,\r\n    fontSize: 12,\r\n    padding: 0,\r\n    width: 32,\r\n    height: 32,\r\n    marginLeft: 9,\r\n  },\r\n});\r\n\r\nexport interface HomeProps {\r\n  candyMachineId?: anchor.web3.PublicKey;\r\n  fairLaunchId?: anchor.web3.PublicKey;\r\n  connection: anchor.web3.Connection;\r\n  startDate: number;\r\n  txTimeout: number;\r\n  rpcHost: string;\r\n}\r\n\r\nconst FAIR_LAUNCH_LOTTERY_SIZE =\r\n  8 + // discriminator\r\n  32 + // fair launch\r\n  1 + // bump\r\n  8; // size of bitmask ones\r\n\r\nconst isWinner = (fairLaunch: FairLaunchAccount | undefined): boolean => {\r\n  if (\r\n    !fairLaunch?.lottery.data ||\r\n    !fairLaunch?.lottery.data.length ||\r\n    !fairLaunch?.ticket.data?.seq ||\r\n    !fairLaunch?.state.phaseThreeStarted\r\n  ) {\r\n    return false;\r\n  }\r\n\r\n  const myByte =\r\n    fairLaunch.lottery.data[\r\n      FAIR_LAUNCH_LOTTERY_SIZE +\r\n        Math.floor(fairLaunch.ticket.data?.seq.toNumber() / 8)\r\n    ];\r\n\r\n  const positionFromRight = 7 - (fairLaunch.ticket.data?.seq.toNumber() % 8);\r\n  const mask = Math.pow(2, positionFromRight);\r\n  const isWinner = myByte & mask;\r\n  return isWinner > 0;\r\n};\r\n\r\nconst Home = (props: HomeProps) => {\r\n  const [fairLaunchBalance, setFairLaunchBalance] = useState<number>(0);\r\n  const [yourSOLBalance, setYourSOLBalance] = useState<number | null>(null);\r\n  const rpcUrl = props.rpcHost;\r\n\r\n  const [isMinting, setIsMinting] = useState(false); // true when user got to press MINT\r\n  const [contributed, setContributed] = useState(0);\r\n\r\n  const wallet = useWallet();\r\n\r\n  const anchorWallet = useMemo(() => {\r\n    if (\r\n      !wallet ||\r\n      !wallet.publicKey ||\r\n      !wallet.signAllTransactions ||\r\n      !wallet.signTransaction\r\n    ) {\r\n      return;\r\n    }\r\n\r\n    return {\r\n      publicKey: wallet.publicKey,\r\n      signAllTransactions: wallet.signAllTransactions,\r\n      signTransaction: wallet.signTransaction,\r\n    } as anchor.Wallet;\r\n  }, [wallet]);\r\n\r\n  const [alertState, setAlertState] = useState<AlertState>({\r\n    open: false,\r\n    message: '',\r\n    severity: undefined,\r\n  });\r\n\r\n  const [fairLaunch, setFairLaunch] = useState<FairLaunchAccount>();\r\n  const [candyMachine, setCandyMachine] = useState<CandyMachineAccount>();\r\n  const [howToOpen, setHowToOpen] = useState(false);\r\n  const [refundExplainerOpen, setRefundExplainerOpen] = useState(false);\r\n\r\n  const onMint = async () => {\r\n    try {\r\n      setIsMinting(true);\r\n      document.getElementById('#identity')?.click();\r\n      if (wallet.connected && candyMachine?.program && wallet.publicKey) {\r\n        if (fairLaunch?.ticket.data?.state.unpunched && isWinner(fairLaunch)) {\r\n          await onPunchTicket();\r\n        }\r\n\r\n        const mintTxId = (\r\n          await mintOneToken(candyMachine, wallet.publicKey)\r\n        )[0];\r\n\r\n        let status: any = { err: true };\r\n        if (mintTxId) {\r\n          status = await awaitTransactionSignatureConfirmation(\r\n            mintTxId,\r\n            props.txTimeout,\r\n            props.connection,\r\n            'singleGossip',\r\n            true,\r\n          );\r\n        }\r\n\r\n        if (!status?.err) {\r\n          setAlertState({\r\n            open: true,\r\n            message: 'Congratulations! Mint succeeded!',\r\n            severity: 'success',\r\n          });\r\n        } else {\r\n          setAlertState({\r\n            open: true,\r\n            message: 'Mint failed! Please try again!',\r\n            severity: 'error',\r\n          });\r\n        }\r\n      }\r\n    } catch (error: any) {\r\n      // TODO: blech:\r\n      let message = error.msg || 'Minting failed! Please try again!';\r\n      if (!error.msg) {\r\n        if (!error.message) {\r\n          message = 'Transaction Timeout! Please try again.';\r\n        } else if (error.message.indexOf('0x138')) {\r\n        } else if (error.message.indexOf('0x137')) {\r\n          message = `SOLD OUT!`;\r\n        } else if (error.message.indexOf('0x135')) {\r\n          message = `Insufficient funds to mint. Please fund your wallet.`;\r\n        }\r\n      } else {\r\n        if (error.code === 311) {\r\n          message = `SOLD OUT!`;\r\n          window.location.reload();\r\n        } else if (error.code === 312) {\r\n          message = `Minting period hasn't started yet.`;\r\n        }\r\n      }\r\n\r\n      setAlertState({\r\n        open: true,\r\n        message,\r\n        severity: 'error',\r\n      });\r\n    } finally {\r\n      setIsMinting(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      if (!anchorWallet) {\r\n        return;\r\n      }\r\n\r\n      try {\r\n        const balance = await props.connection.getBalance(\r\n          anchorWallet.publicKey,\r\n        );\r\n        setYourSOLBalance(balance);\r\n\r\n        if (props.fairLaunchId) {\r\n          const state = await getFairLaunchState(\r\n            anchorWallet,\r\n            props.fairLaunchId,\r\n            props.connection,\r\n          );\r\n\r\n          setFairLaunch(state);\r\n\r\n          try {\r\n            if (state.state.tokenMint) {\r\n              const fairLaunchBalance =\r\n                await props.connection.getTokenAccountBalance(\r\n                  (\r\n                    await getAtaForMint(\r\n                      state.state.tokenMint,\r\n                      anchorWallet.publicKey,\r\n                    )\r\n                  )[0],\r\n                );\r\n\r\n              if (fairLaunchBalance.value) {\r\n                setFairLaunchBalance(fairLaunchBalance.value.uiAmount || 0);\r\n              }\r\n            }\r\n          } catch (e) {\r\n            console.log('Problem getting fair launch token balance');\r\n            console.log(e);\r\n          }\r\n          if (contributed === 0) {\r\n            const phase = getPhase(state, undefined);\r\n\r\n            if (phase === Phase.SetPrice) {\r\n              const ticks =\r\n                (state.state.data.priceRangeEnd.toNumber() -\r\n                  state.state.data.priceRangeStart.toNumber()) /\r\n                state.state.data.tickSize.toNumber();\r\n              const randomTick = Math.round(Math.random() * ticks);\r\n\r\n              setContributed(\r\n                (state.state.data.priceRangeStart.toNumber() +\r\n                  randomTick * state.state.data.tickSize.toNumber()) /\r\n                  LAMPORTS_PER_SOL,\r\n              );\r\n            } else {\r\n              setContributed(\r\n                (\r\n                  state.state.currentMedian || state.state.data.priceRangeStart\r\n                ).toNumber() / LAMPORTS_PER_SOL,\r\n              );\r\n            }\r\n          }\r\n        } else {\r\n          console.log('No fair launch detected in configuration.');\r\n        }\r\n      } catch (e) {\r\n        console.log('Problem getting fair launch state');\r\n        console.log(e);\r\n      }\r\n      if (props.candyMachineId) {\r\n        try {\r\n          const cndy = await getCandyMachineState(\r\n            anchorWallet,\r\n            props.candyMachineId,\r\n            props.connection,\r\n          );\r\n          setCandyMachine(cndy);\r\n        } catch (e) {\r\n          console.log('Problem getting candy machine state');\r\n          console.log(e);\r\n        }\r\n      } else {\r\n        console.log('No candy machine detected in configuration.');\r\n      }\r\n    })();\r\n  }, [\r\n    anchorWallet,\r\n    props.candyMachineId,\r\n    props.connection,\r\n    props.fairLaunchId,\r\n    contributed,\r\n  ]);\r\n\r\n  const min = formatNumber.asNumber(fairLaunch?.state.data.priceRangeStart);\r\n  const max = formatNumber.asNumber(fairLaunch?.state.data.priceRangeEnd);\r\n  const step = formatNumber.asNumber(fairLaunch?.state.data.tickSize);\r\n  const median = formatNumber.asNumber(fairLaunch?.state.currentMedian);\r\n  const phase = getPhase(fairLaunch, candyMachine);\r\n  console.log('Phase', phase);\r\n  const marks = [\r\n    {\r\n      value: min || 0,\r\n      label: `${min} SOL`,\r\n    },\r\n    // TODO:L\r\n    ...(phase === Phase.SetPrice\r\n      ? []\r\n      : [\r\n          {\r\n            value: median || 0,\r\n            label: `${median}`,\r\n          },\r\n        ]),\r\n    // display user comitted value\r\n    // {\r\n    //   value: 37,\r\n    //   label: '37°C',\r\n    // },\r\n    {\r\n      value: max || 0,\r\n      label: `${max} SOL`,\r\n    },\r\n  ].filter(_ => _ !== undefined && _.value !== 0) as any;\r\n\r\n  const onDeposit = async () => {\r\n    if (!anchorWallet) {\r\n      return;\r\n    }\r\n\r\n    console.log('deposit');\r\n    setIsMinting(true);\r\n    try {\r\n      await purchaseTicket(contributed, anchorWallet, fairLaunch);\r\n      setIsMinting(false);\r\n      setAlertState({\r\n        open: true,\r\n        message: `Congratulations! Bid ${\r\n          fairLaunch?.ticket.data ? 'updated' : 'inserted'\r\n        }!`,\r\n        severity: 'success',\r\n      });\r\n    } catch (e) {\r\n      console.log(e);\r\n      setIsMinting(false);\r\n      setAlertState({\r\n        open: true,\r\n        message: 'Something went wrong.',\r\n        severity: 'error',\r\n      });\r\n    }\r\n  };\r\n  const onRefundTicket = async () => {\r\n    if (!anchorWallet) {\r\n      return;\r\n    }\r\n\r\n    console.log('refund');\r\n    try {\r\n      setIsMinting(true);\r\n      await purchaseTicket(0, anchorWallet, fairLaunch);\r\n      setIsMinting(false);\r\n      setAlertState({\r\n        open: true,\r\n        message:\r\n          'Congratulations! Funds withdrawn. This is an irreversible action.',\r\n        severity: 'success',\r\n      });\r\n    } catch (e) {\r\n      console.log(e);\r\n      setIsMinting(false);\r\n      setAlertState({\r\n        open: true,\r\n        message: 'Something went wrong.',\r\n        severity: 'error',\r\n      });\r\n    }\r\n  };\r\n\r\n  const onPunchTicket = async () => {\r\n    if (!anchorWallet || !fairLaunch || !fairLaunch.ticket) {\r\n      return;\r\n    }\r\n\r\n    console.log('punch');\r\n    setIsMinting(true);\r\n    try {\r\n      await punchTicket(anchorWallet, fairLaunch);\r\n      setIsMinting(false);\r\n      setAlertState({\r\n        open: true,\r\n        message: 'Congratulations! Ticket punched!',\r\n        severity: 'success',\r\n      });\r\n    } catch (e) {\r\n      console.log(e);\r\n      setIsMinting(false);\r\n      setAlertState({\r\n        open: true,\r\n        message: 'Something went wrong.',\r\n        severity: 'error',\r\n      });\r\n    }\r\n  };\r\n\r\n  const candyMachinePredatesFairLaunch =\r\n    candyMachine?.state.goLiveDate &&\r\n    fairLaunch?.state.data.phaseTwoEnd &&\r\n    candyMachine?.state.goLiveDate.lt(fairLaunch?.state.data.phaseTwoEnd);\r\n\r\n  const notEnoughSOL = !!(\r\n    yourSOLBalance != null &&\r\n    fairLaunch?.state.data.priceRangeStart &&\r\n    fairLaunch?.state.data.fee &&\r\n    yourSOLBalance + (fairLaunch?.ticket?.data?.amount.toNumber() || 0) <\r\n      contributed * LAMPORTS_PER_SOL +\r\n        fairLaunch?.state.data.fee.toNumber() +\r\n        0.01\r\n  );\r\n\r\n  return (\r\n    <Container style={{ marginTop: 100 }}>\r\n      {fairLaunch && (\r\n        <AntiRug\r\n          fairLaunch={fairLaunch}\r\n          isMinting={[isMinting, setIsMinting]}\r\n          setAlertState={setAlertState}\r\n        />\r\n      )}\r\n      <Container maxWidth=\"xs\" style={{ position: 'relative' }}>\r\n        <Paper\r\n          style={{ padding: 24, backgroundColor: '#151A1F', borderRadius: 6 }}\r\n        >\r\n          <Grid container justifyContent=\"center\" direction=\"column\">\r\n            <PhaseHeader\r\n              phase={phase}\r\n              fairLaunch={fairLaunch}\r\n              candyMachine={candyMachine}\r\n              rpcUrl={rpcUrl}\r\n              candyMachinePredatesFairLaunch={!!candyMachinePredatesFairLaunch}\r\n            />\r\n            {fairLaunch && (\r\n              <Grid\r\n                container\r\n                direction=\"column\"\r\n                justifyContent=\"center\"\r\n                alignItems=\"center\"\r\n                style={{\r\n                  height: 200,\r\n                  marginTop: 20,\r\n                  marginBottom: 20,\r\n                  background: '#384457',\r\n                  borderRadius: 6,\r\n                }}\r\n              >\r\n                {fairLaunch.ticket.data ? (\r\n                  <>\r\n                    <Typography>Your bid</Typography>\r\n                    <Typography variant=\"h6\" style={{ fontWeight: 900 }}>\r\n                      {formatNumber.format(\r\n                        (fairLaunch?.ticket.data?.amount.toNumber() || 0) /\r\n                          LAMPORTS_PER_SOL,\r\n                      )}{' '}\r\n                      SOL\r\n                    </Typography>\r\n                  </>\r\n                ) : [Phase.AnticipationPhase, Phase.SetPrice].includes(\r\n                    phase,\r\n                  ) ? (\r\n                  <Typography>\r\n                    You haven't entered this raffle yet. <br />\r\n                    {fairLaunch?.state?.data?.fee && (\r\n                      <span>\r\n                        <b>\r\n                          All initial bids will incur a ◎{' '}\r\n                          {fairLaunch?.state?.data?.fee.toNumber() /\r\n                            LAMPORTS_PER_SOL}{' '}\r\n                          fee.\r\n                        </b>\r\n                      </span>\r\n                    )}\r\n                  </Typography>\r\n                ) : (\r\n                  <Typography>\r\n                    You didn't participate in this raffle.\r\n                  </Typography>\r\n                )}\r\n              </Grid>\r\n            )}\r\n\r\n            {fairLaunch && (\r\n              <>\r\n                {[\r\n                  Phase.SetPrice,\r\n                  Phase.GracePeriod,\r\n                  Phase.RaffleFinished,\r\n                  Phase.Lottery,\r\n                ].includes(phase) &&\r\n                  fairLaunch?.ticket?.data?.state.withdrawn && (\r\n                    <div style={{ paddingTop: '15px' }}>\r\n                      <Alert severity=\"error\">\r\n                        Your bid was withdrawn and cannot be adjusted or\r\n                        re-inserted.\r\n                      </Alert>\r\n                    </div>\r\n                  )}\r\n                {[Phase.GracePeriod].includes(phase) &&\r\n                  fairLaunch.state.currentMedian &&\r\n                  fairLaunch?.ticket?.data?.amount &&\r\n                  !fairLaunch?.ticket?.data?.state.withdrawn &&\r\n                  fairLaunch.state.currentMedian.gt(\r\n                    fairLaunch?.ticket?.data?.amount,\r\n                  ) && (\r\n                    <div style={{ paddingTop: '15px' }}>\r\n                      <Alert severity=\"warning\">\r\n                        Your bid is currently below the median and will not be\r\n                        eligible for the raffle.\r\n                      </Alert>\r\n                    </div>\r\n                  )}\r\n                {[Phase.RaffleFinished, Phase.Lottery].includes(phase) &&\r\n                  fairLaunch.state.currentMedian &&\r\n                  fairLaunch?.ticket?.data?.amount &&\r\n                  !fairLaunch?.ticket?.data?.state.withdrawn &&\r\n                  fairLaunch.state.currentMedian.gt(\r\n                    fairLaunch?.ticket?.data?.amount,\r\n                  ) && (\r\n                    <div style={{ paddingTop: '15px' }}>\r\n                      <Alert severity=\"error\">\r\n                        Your bid was below the median and was not included in\r\n                        the raffle. You may click <em>Withdraw</em> when the\r\n                        raffle ends or you will be automatically issued one when\r\n                        the Fair Launch authority withdraws from the treasury.\r\n                      </Alert>\r\n                    </div>\r\n                  )}\r\n                {notEnoughSOL && (\r\n                  <Alert severity=\"error\">\r\n                    You do not have enough SOL in your account to place this\r\n                    bid.\r\n                  </Alert>\r\n                )}\r\n              </>\r\n            )}\r\n\r\n            {[Phase.SetPrice, Phase.GracePeriod].includes(phase) && (\r\n              <>\r\n                <Grid style={{ marginTop: 40, marginBottom: 20 }}>\r\n                  {contributed > 0 ? (\r\n                    <ValueSlider\r\n                      min={min}\r\n                      marks={marks}\r\n                      max={max}\r\n                      step={step}\r\n                      value={contributed}\r\n                      onChange={(ev, val) => setContributed(val as any)}\r\n                      valueLabelDisplay=\"auto\"\r\n                      style={{\r\n                        width: 'calc(100% - 40px)',\r\n                        marginLeft: 20,\r\n                        height: 30,\r\n                      }}\r\n                    />\r\n                  ) : (\r\n                    <div\r\n                      style={{\r\n                        display: 'flex',\r\n                        justifyContent: 'center',\r\n                        alignItems: 'center',\r\n                      }}\r\n                    >\r\n                      <CircularProgress />\r\n                    </div>\r\n                  )}\r\n                </Grid>\r\n              </>\r\n            )}\r\n\r\n            {!wallet.connected ? (\r\n              <ConnectButton>\r\n                Connect{' '}\r\n                {[Phase.SetPrice].includes(phase) ? 'to bid' : 'to see status'}\r\n              </ConnectButton>\r\n            ) : (\r\n              <div>\r\n                {[Phase.SetPrice, Phase.GracePeriod].includes(phase) && (\r\n                  <>\r\n                    <CTAButton\r\n                      onClick={onDeposit}\r\n                      variant=\"contained\"\r\n                      disabled={\r\n                        isMinting ||\r\n                        (!fairLaunch?.ticket.data &&\r\n                          phase === Phase.GracePeriod) ||\r\n                        notEnoughSOL\r\n                      }\r\n                    >\r\n                      {isMinting ? (\r\n                        <CircularProgress />\r\n                      ) : !fairLaunch?.ticket.data ? (\r\n                        'Place bid'\r\n                      ) : (\r\n                        'Change bid'\r\n                      )}\r\n                      {}\r\n                    </CTAButton>\r\n                  </>\r\n                )}\r\n\r\n                {[Phase.RaffleFinished].includes(phase) && (\r\n                  <>\r\n                    {isWinner(fairLaunch) && (\r\n                      <CTAButton\r\n                        onClick={onPunchTicket}\r\n                        variant=\"contained\"\r\n                        disabled={\r\n                          fairLaunch?.ticket.data?.state.punched !== undefined\r\n                        }\r\n                      >\r\n                        {isMinting ? <CircularProgress /> : 'Punch Ticket'}\r\n                      </CTAButton>\r\n                    )}\r\n\r\n                    {!isWinner(fairLaunch) && (\r\n                      <CTAButton\r\n                        onClick={onRefundTicket}\r\n                        variant=\"contained\"\r\n                        disabled={\r\n                          isMinting ||\r\n                          fairLaunch?.ticket.data === undefined ||\r\n                          fairLaunch?.ticket.data?.state.withdrawn !== undefined\r\n                        }\r\n                      >\r\n                        {isMinting ? <CircularProgress /> : 'Withdraw'}\r\n                      </CTAButton>\r\n                    )}\r\n                  </>\r\n                )}\r\n\r\n                {phase === Phase.Phase4 && (\r\n                  <>\r\n                    {(!fairLaunch ||\r\n                      isWinner(fairLaunch) ||\r\n                      fairLaunchBalance > 0) && (\r\n                      <MintContainer>\r\n                        {candyMachine?.state.isActive &&\r\n                        candyMachine?.state.gatekeeper &&\r\n                        wallet.publicKey &&\r\n                        wallet.signTransaction ? (\r\n                          <GatewayProvider\r\n                            wallet={{\r\n                              publicKey:\r\n                                wallet.publicKey ||\r\n                                new PublicKey(CANDY_MACHINE_PROGRAM),\r\n                              //@ts-ignore\r\n                              signTransaction: wallet.signTransaction,\r\n                            }}\r\n                            // // Replace with following when added\r\n                            // gatekeeperNetwork={candyMachine.state.gatekeeper_network}\r\n                            gatekeeperNetwork={\r\n                              candyMachine?.state?.gatekeeper?.gatekeeperNetwork\r\n                            } // This is the ignite (captcha) network\r\n                            /// Don't need this for mainnet\r\n                            clusterUrl={rpcUrl}\r\n                            options={{ autoShowModal: false }}\r\n                          >\r\n                            <MintButton\r\n                              candyMachine={candyMachine}\r\n                              fairLaunch={fairLaunch}\r\n                              isMinting={isMinting}\r\n                              fairLaunchBalance={fairLaunchBalance}\r\n                              onMint={onMint}\r\n                            />\r\n                          </GatewayProvider>\r\n                        ) : (\r\n                          <MintButton\r\n                            candyMachine={candyMachine}\r\n                            fairLaunch={fairLaunch}\r\n                            isMinting={isMinting}\r\n                            fairLaunchBalance={fairLaunchBalance}\r\n                            onMint={onMint}\r\n                          />\r\n                        )}\r\n                      </MintContainer>\r\n                    )}\r\n\r\n                    {!(\r\n                      !fairLaunch ||\r\n                      isWinner(fairLaunch) ||\r\n                      fairLaunchBalance > 0\r\n                    ) && (\r\n                      <CTAButton\r\n                        onClick={onRefundTicket}\r\n                        variant=\"contained\"\r\n                        disabled={\r\n                          isMinting ||\r\n                          fairLaunch?.ticket.data === undefined ||\r\n                          fairLaunch?.ticket.data?.state.withdrawn !== undefined\r\n                        }\r\n                      >\r\n                        {isMinting ? <CircularProgress /> : 'Withdraw'}\r\n                      </CTAButton>\r\n                    )}\r\n                  </>\r\n                )}\r\n              </div>\r\n            )}\r\n\r\n            <Grid\r\n              container\r\n              justifyContent=\"space-between\"\r\n              color=\"textSecondary\"\r\n            >\r\n              {fairLaunch && (\r\n                <Link\r\n                  component=\"button\"\r\n                  variant=\"body2\"\r\n                  color=\"textSecondary\"\r\n                  align=\"left\"\r\n                  onClick={() => {\r\n                    setHowToOpen(true);\r\n                  }}\r\n                >\r\n                  How this raffle works\r\n                </Link>\r\n              )}\r\n              {fairLaunch?.ticket.data && (\r\n                <Link\r\n                  component=\"button\"\r\n                  variant=\"body2\"\r\n                  color=\"textSecondary\"\r\n                  align=\"right\"\r\n                  onClick={() => {\r\n                    if (\r\n                      !fairLaunch ||\r\n                      phase === Phase.Lottery ||\r\n                      isWinner(fairLaunch) ||\r\n                      fairLaunchBalance > 0\r\n                    ) {\r\n                      setRefundExplainerOpen(true);\r\n                    } else {\r\n                      onRefundTicket();\r\n                    }\r\n                  }}\r\n                >\r\n                  Withdraw funds\r\n                </Link>\r\n              )}\r\n            </Grid>\r\n            <Dialog\r\n              open={refundExplainerOpen}\r\n              onClose={() => setRefundExplainerOpen(false)}\r\n              PaperProps={{\r\n                style: { backgroundColor: '#222933', borderRadius: 6 },\r\n              }}\r\n            >\r\n              <MuiDialogContent style={{ padding: 24 }}>\r\n                During raffle phases, or if you are a winner, or if this website\r\n                is not configured to be a fair launch but simply a candy\r\n                machine, refunds are disallowed.\r\n              </MuiDialogContent>\r\n            </Dialog>\r\n            <Dialog\r\n              open={howToOpen}\r\n              onClose={() => setHowToOpen(false)}\r\n              PaperProps={{\r\n                style: { backgroundColor: '#222933', borderRadius: 6 },\r\n              }}\r\n            >\r\n              <MuiDialogTitle\r\n                disableTypography\r\n                style={{\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  justifyContent: 'space-between',\r\n                }}\r\n              >\r\n                <Link\r\n                  component=\"button\"\r\n                  variant=\"h6\"\r\n                  color=\"textSecondary\"\r\n                  onClick={() => {\r\n                    setHowToOpen(true);\r\n                  }}\r\n                >\r\n                  How it works\r\n                </Link>\r\n                <IconButton\r\n                  aria-label=\"close\"\r\n                  className={dialogStyles.closeButton}\r\n                  onClick={() => setHowToOpen(false)}\r\n                >\r\n                  <CloseIcon />\r\n                </IconButton>\r\n              </MuiDialogTitle>\r\n              <MuiDialogContent>\r\n                <Typography variant=\"h6\">\r\n                  Phase 1 - Set the fair price:\r\n                </Typography>\r\n                <Typography gutterBottom color=\"textSecondary\">\r\n                  Enter a bid in the range provided by the artist. The median of\r\n                  all bids will be the \"fair\" price of the raffle ticket.{' '}\r\n                  {fairLaunch?.state?.data?.fee && (\r\n                    <span>\r\n                      <b>\r\n                        All bids will incur a ◎{' '}\r\n                        {fairLaunch?.state?.data?.fee.toNumber() /\r\n                          LAMPORTS_PER_SOL}{' '}\r\n                        fee.\r\n                      </b>\r\n                    </span>\r\n                  )}\r\n                </Typography>\r\n                <Typography variant=\"h6\">Phase 2 - Grace period:</Typography>\r\n                <Typography gutterBottom color=\"textSecondary\">\r\n                  If your bid was at or above the fair price, you automatically\r\n                  get a raffle ticket at that price. There's nothing else you\r\n                  need to do. Your excess SOL will be returned to you when the\r\n                  Fair Launch authority withdraws from the treasury. If your bid\r\n                  is below the median price, you can still opt in at the fair\r\n                  price during this phase.\r\n                </Typography>\r\n                {candyMachinePredatesFairLaunch ? (\r\n                  <>\r\n                    <Typography variant=\"h6\">\r\n                      Phase 3 - The Candy Machine:\r\n                    </Typography>\r\n                    <Typography gutterBottom color=\"textSecondary\">\r\n                      Everyone who got a raffle ticket at the fair price is\r\n                      entered to win an NFT. If you win an NFT, congrats. If you\r\n                      don’t, no worries, your SOL will go right back into your\r\n                      wallet.\r\n                    </Typography>\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <Typography variant=\"h6\">Phase 3 - The Lottery:</Typography>\r\n                    <Typography gutterBottom color=\"textSecondary\">\r\n                      Everyone who got a raffle ticket at the fair price is\r\n                      entered to win a Fair Launch Token that entitles them to\r\n                      an NFT at a later date using a Candy Machine here. If you\r\n                      don’t win, no worries, your SOL will go right back into\r\n                      your wallet.\r\n                    </Typography>\r\n                    <Typography variant=\"h6\">\r\n                      Phase 4 - The Candy Machine:\r\n                    </Typography>\r\n                    <Typography gutterBottom color=\"textSecondary\">\r\n                      On{' '}\r\n                      {candyMachine?.state.goLiveDate\r\n                        ? toDate(\r\n                            candyMachine?.state.goLiveDate,\r\n                          )?.toLocaleString()\r\n                        : ' some later date'}\r\n                      , you will be able to exchange your Fair Launch token for\r\n                      an NFT using the Candy Machine at this site by pressing\r\n                      the Mint Button.\r\n                    </Typography>\r\n                  </>\r\n                )}\r\n              </MuiDialogContent>\r\n            </Dialog>\r\n\r\n            {/* {wallet.connected && (\r\n              <p>\r\n                Address: {shortenAddress(wallet.publicKey?.toBase58() || '')}\r\n              </p>\r\n            )}\r\n\r\n            {wallet.connected && (\r\n              <p>Balance: {(balance || 0).toLocaleString()} SOL</p>\r\n            )} */}\r\n          </Grid>\r\n        </Paper>\r\n      </Container>\r\n\r\n      {fairLaunch && (\r\n        <Container\r\n          maxWidth=\"xs\"\r\n          style={{ position: 'relative', marginTop: 10 }}\r\n        >\r\n          <div style={{ margin: 20 }}>\r\n            <Grid container direction=\"row\" wrap=\"nowrap\">\r\n              <Grid container md={4} direction=\"column\">\r\n                <Typography variant=\"body2\" color=\"textSecondary\">\r\n                  Bids\r\n                </Typography>\r\n                <Typography\r\n                  variant=\"h6\"\r\n                  color=\"textPrimary\"\r\n                  style={{ fontWeight: 'bold' }}\r\n                >\r\n                  {fairLaunch?.state.numberTicketsSold.toNumber() || 0}\r\n                </Typography>\r\n              </Grid>\r\n              <Grid container md={4} direction=\"column\">\r\n                <Typography variant=\"body2\" color=\"textSecondary\">\r\n                  Median bid\r\n                </Typography>\r\n                <Typography\r\n                  variant=\"h6\"\r\n                  color=\"textPrimary\"\r\n                  style={{ fontWeight: 'bold' }}\r\n                >\r\n                  ◎{' '}\r\n                  {phase === Phase.AnticipationPhase || phase === Phase.SetPrice\r\n                    ? '???'\r\n                    : formatNumber.format(median)}\r\n                </Typography>\r\n              </Grid>\r\n              <Grid container md={4} direction=\"column\">\r\n                <Typography variant=\"body2\" color=\"textSecondary\">\r\n                  Total raised\r\n                </Typography>\r\n                <Typography\r\n                  variant=\"h6\"\r\n                  color=\"textPrimary\"\r\n                  style={{ fontWeight: 'bold' }}\r\n                >\r\n                  ◎{' '}\r\n                  {formatNumber.format(\r\n                    (fairLaunch?.treasury || 0) / LAMPORTS_PER_SOL,\r\n                  )}\r\n                </Typography>\r\n              </Grid>\r\n            </Grid>\r\n          </div>\r\n        </Container>\r\n      )}\r\n      <Snackbar\r\n        open={alertState.open}\r\n        autoHideDuration={6000}\r\n        onClose={() => setAlertState({ ...alertState, open: false })}\r\n      >\r\n        <Alert\r\n          onClose={() => setAlertState({ ...alertState, open: false })}\r\n          severity={alertState.severity}\r\n        >\r\n          {alertState.message}\r\n        </Alert>\r\n      </Snackbar>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n"]},"metadata":{},"sourceType":"module"}