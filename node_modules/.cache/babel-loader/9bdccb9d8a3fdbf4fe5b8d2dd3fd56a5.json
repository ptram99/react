{"ast":null,"code":"import Grid from'@material-ui/core/Grid';import Typography from'@material-ui/core/Typography';import{PhaseCountdown}from'./countdown';import{toDate}from'./utils';import{useWallet}from'@solana/wallet-adapter-react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var Phase;(function(Phase){Phase[Phase[\"AnticipationPhase\"]=0]=\"AnticipationPhase\";Phase[Phase[\"SetPrice\"]=1]=\"SetPrice\";Phase[Phase[\"GracePeriod\"]=2]=\"GracePeriod\";Phase[Phase[\"Lottery\"]=3]=\"Lottery\";Phase[Phase[\"RaffleFinished\"]=4]=\"RaffleFinished\";Phase[Phase[\"WaitForCM\"]=5]=\"WaitForCM\";Phase[Phase[\"Phase4\"]=6]=\"Phase4\";Phase[Phase[\"Unknown\"]=7]=\"Unknown\";})(Phase||(Phase={}));export function getPhase(fairLaunch,candyMachine){var _toDate,_toDate2,_toDate3,_toDate4;var curr=new Date().getTime();var phaseOne=(_toDate=toDate(fairLaunch===null||fairLaunch===void 0?void 0:fairLaunch.state.data.phaseOneStart))===null||_toDate===void 0?void 0:_toDate.getTime();var phaseOneEnd=(_toDate2=toDate(fairLaunch===null||fairLaunch===void 0?void 0:fairLaunch.state.data.phaseOneEnd))===null||_toDate2===void 0?void 0:_toDate2.getTime();var phaseTwoEnd=(_toDate3=toDate(fairLaunch===null||fairLaunch===void 0?void 0:fairLaunch.state.data.phaseTwoEnd))===null||_toDate3===void 0?void 0:_toDate3.getTime();var candyMachineGoLive=(_toDate4=toDate(candyMachine===null||candyMachine===void 0?void 0:candyMachine.state.goLiveDate))===null||_toDate4===void 0?void 0:_toDate4.getTime();if(phaseOne&&curr<phaseOne){return Phase.AnticipationPhase;}else if(phaseOneEnd&&curr<=phaseOneEnd){return Phase.SetPrice;}else if(phaseTwoEnd&&curr<=phaseTwoEnd){return Phase.GracePeriod;}else if(!(fairLaunch!==null&&fairLaunch!==void 0&&fairLaunch.state.phaseThreeStarted)&&phaseTwoEnd&&curr>phaseTwoEnd){return Phase.Lottery;}else if((!fairLaunch||fairLaunch!==null&&fairLaunch!==void 0&&fairLaunch.state.phaseThreeStarted)&&candyMachineGoLive&&curr>candyMachineGoLive){return Phase.Phase4;}else if(fairLaunch!==null&&fairLaunch!==void 0&&fairLaunch.state.phaseThreeStarted){if(!candyMachine){return Phase.RaffleFinished;}else{return Phase.WaitForCM;}}return Phase.Unknown;}var Header=function Header(props){var phaseName=props.phaseName,desc=props.desc,date=props.date,status=props.status;return/*#__PURE__*/_jsxs(Grid,{container:true,justifyContent:\"center\",children:[/*#__PURE__*/_jsxs(Grid,{xs:6,justifyContent:\"center\",direction:\"column\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",style:{fontWeight:600},children:phaseName}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",color:\"textSecondary\",children:desc})]}),/*#__PURE__*/_jsx(Grid,{xs:6,container:true,justifyContent:\"flex-end\",children:/*#__PURE__*/_jsx(PhaseCountdown,{date:toDate(date),style:{justifyContent:'flex-end'},status:status||'COMPLETE'})})]});};export var PhaseHeader=function PhaseHeader(_ref){var phase=_ref.phase,fairLaunch=_ref.fairLaunch,candyMachine=_ref.candyMachine,candyMachinePredatesFairLaunch=_ref.candyMachinePredatesFairLaunch,rpcUrl=_ref.rpcUrl;var wallet=useWallet();console.log('D',candyMachine);console.log('Wallet',wallet);return/*#__PURE__*/_jsxs(_Fragment,{children:[phase===Phase.AnticipationPhase&&/*#__PURE__*/_jsx(Header,{phaseName:'Phase 0',desc:'Anticipation Phase',date:fairLaunch===null||fairLaunch===void 0?void 0:fairLaunch.state.data.phaseOneStart}),phase===Phase.SetPrice&&/*#__PURE__*/_jsx(Header,{phaseName:'Phase 1',desc:'Set price phase',date:fairLaunch===null||fairLaunch===void 0?void 0:fairLaunch.state.data.phaseOneEnd}),phase===Phase.GracePeriod&&/*#__PURE__*/_jsx(Header,{phaseName:'Phase 2',desc:'Grace period',date:fairLaunch===null||fairLaunch===void 0?void 0:fairLaunch.state.data.phaseTwoEnd}),phase===Phase.Lottery&&/*#__PURE__*/_jsx(Header,{phaseName:'Phase 3',desc:'Raffle in progress',date:fairLaunch===null||fairLaunch===void 0?void 0:fairLaunch.state.data.phaseTwoEnd.add(fairLaunch===null||fairLaunch===void 0?void 0:fairLaunch.state.data.lotteryDuration)}),phase===Phase.RaffleFinished&&/*#__PURE__*/_jsx(Header,{phaseName:'Phase 3',desc:'Raffle finished!',date:fairLaunch===null||fairLaunch===void 0?void 0:fairLaunch.state.data.phaseTwoEnd}),phase===Phase.WaitForCM&&/*#__PURE__*/_jsx(Header,{phaseName:'Phase 3',desc:'Minting starts in...',date:candyMachine===null||candyMachine===void 0?void 0:candyMachine.state.goLiveDate}),phase===Phase.Unknown&&!candyMachine&&/*#__PURE__*/_jsx(Header,{phaseName:'Loading...',desc:'Waiting for you to connect your wallet.',date:undefined}),phase===Phase.Phase4&&/*#__PURE__*/_jsx(Header,{phaseName:candyMachinePredatesFairLaunch?'Phase 3':'Phase 4',desc:'Candy Time üç¨ üç¨ üç¨',date:candyMachine===null||candyMachine===void 0?void 0:candyMachine.state.goLiveDate,status:\"LIVE\"})]});};","map":{"version":3,"sources":["C:/Users/User/~/metaplex/fair-launch/src/PhaseHeader.tsx"],"names":["Grid","Typography","PhaseCountdown","toDate","useWallet","Phase","getPhase","fairLaunch","candyMachine","curr","Date","getTime","phaseOne","state","data","phaseOneStart","phaseOneEnd","phaseTwoEnd","candyMachineGoLive","goLiveDate","AnticipationPhase","SetPrice","GracePeriod","phaseThreeStarted","Lottery","Phase4","RaffleFinished","WaitForCM","Unknown","Header","props","phaseName","desc","date","status","fontWeight","justifyContent","PhaseHeader","phase","candyMachinePredatesFairLaunch","rpcUrl","wallet","console","log","add","lotteryDuration","undefined"],"mappings":"AACA,MAAOA,CAAAA,IAAP,KAAiB,wBAAjB,CACA,MAAOC,CAAAA,UAAP,KAAuB,8BAAvB,CACA,OAASC,cAAT,KAA+B,aAA/B,CACA,OAASC,MAAT,KAAuB,SAAvB,CAGA,OAASC,SAAT,KAA0B,8BAA1B,C,6IAEA,UAAYC,CAAAA,KAAZ,C,UAAYA,K,EAAAA,K,CAAAA,K,6CAAAA,K,CAAAA,K,2BAAAA,K,CAAAA,K,iCAAAA,K,CAAAA,K,yBAAAA,K,CAAAA,K,uCAAAA,K,CAAAA,K,6BAAAA,K,CAAAA,K,uBAAAA,K,CAAAA,K,4BAAAA,K,GAAAA,K,MAWZ,MAAO,SAASC,CAAAA,QAAT,CACLC,UADK,CAELC,YAFK,CAGE,wCACP,GAAMC,CAAAA,IAAI,CAAG,GAAIC,CAAAA,IAAJ,GAAWC,OAAX,EAAb,CACA,GAAMC,CAAAA,QAAQ,UAAGT,MAAM,CAACI,UAAD,SAACA,UAAD,iBAACA,UAAU,CAAEM,KAAZ,CAAkBC,IAAlB,CAAuBC,aAAxB,CAAT,kCAAG,QAA8CJ,OAA9C,EAAjB,CACA,GAAMK,CAAAA,WAAW,WAAGb,MAAM,CAACI,UAAD,SAACA,UAAD,iBAACA,UAAU,CAAEM,KAAZ,CAAkBC,IAAlB,CAAuBE,WAAxB,CAAT,mCAAG,SAA4CL,OAA5C,EAApB,CACA,GAAMM,CAAAA,WAAW,WAAGd,MAAM,CAACI,UAAD,SAACA,UAAD,iBAACA,UAAU,CAAEM,KAAZ,CAAkBC,IAAlB,CAAuBG,WAAxB,CAAT,mCAAG,SAA4CN,OAA5C,EAApB,CACA,GAAMO,CAAAA,kBAAkB,WAAGf,MAAM,CAACK,YAAD,SAACA,YAAD,iBAACA,YAAY,CAAEK,KAAd,CAAoBM,UAArB,CAAT,mCAAG,SAAwCR,OAAxC,EAA3B,CAEA,GAAIC,QAAQ,EAAIH,IAAI,CAAGG,QAAvB,CAAiC,CAC/B,MAAOP,CAAAA,KAAK,CAACe,iBAAb,CACD,CAFD,IAEO,IAAIJ,WAAW,EAAIP,IAAI,EAAIO,WAA3B,CAAwC,CAC7C,MAAOX,CAAAA,KAAK,CAACgB,QAAb,CACD,CAFM,IAEA,IAAIJ,WAAW,EAAIR,IAAI,EAAIQ,WAA3B,CAAwC,CAC7C,MAAOZ,CAAAA,KAAK,CAACiB,WAAb,CACD,CAFM,IAEA,IACL,EAACf,UAAD,SAACA,UAAD,WAACA,UAAU,CAAEM,KAAZ,CAAkBU,iBAAnB,GACAN,WADA,EAEAR,IAAI,CAAGQ,WAHF,CAIL,CACA,MAAOZ,CAAAA,KAAK,CAACmB,OAAb,CACD,CANM,IAMA,IACL,CAAC,CAACjB,UAAD,EAAeA,UAAf,SAAeA,UAAf,WAAeA,UAAU,CAAEM,KAAZ,CAAkBU,iBAAlC,GACAL,kBADA,EAEAT,IAAI,CAAGS,kBAHF,CAIL,CACA,MAAOb,CAAAA,KAAK,CAACoB,MAAb,CACD,CANM,IAMA,IAAIlB,UAAJ,SAAIA,UAAJ,WAAIA,UAAU,CAAEM,KAAZ,CAAkBU,iBAAtB,CAAyC,CAC9C,GAAI,CAACf,YAAL,CAAmB,CACjB,MAAOH,CAAAA,KAAK,CAACqB,cAAb,CACD,CAFD,IAEO,CACL,MAAOrB,CAAAA,KAAK,CAACsB,SAAb,CACD,CACF,CACD,MAAOtB,CAAAA,KAAK,CAACuB,OAAb,CACD,CAED,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAACC,KAAD,CAKT,CACJ,GAAQC,CAAAA,SAAR,CAA0CD,KAA1C,CAAQC,SAAR,CAAmBC,IAAnB,CAA0CF,KAA1C,CAAmBE,IAAnB,CAAyBC,IAAzB,CAA0CH,KAA1C,CAAyBG,IAAzB,CAA+BC,MAA/B,CAA0CJ,KAA1C,CAA+BI,MAA/B,CACA,mBACE,MAAC,IAAD,EAAM,SAAS,KAAf,CAAgB,cAAc,CAAC,QAA/B,wBACE,MAAC,IAAD,EAAM,EAAE,CAAE,CAAV,CAAa,cAAc,CAAC,QAA5B,CAAqC,SAAS,CAAC,QAA/C,wBACE,KAAC,UAAD,EAAY,OAAO,CAAC,IAApB,CAAyB,KAAK,CAAE,CAAEC,UAAU,CAAE,GAAd,CAAhC,UACGJ,SADH,EADF,cAIE,KAAC,UAAD,EAAY,OAAO,CAAC,OAApB,CAA4B,KAAK,CAAC,eAAlC,UACGC,IADH,EAJF,GADF,cASE,KAAC,IAAD,EAAM,EAAE,CAAE,CAAV,CAAa,SAAS,KAAtB,CAAuB,cAAc,CAAC,UAAtC,uBACE,KAAC,cAAD,EACE,IAAI,CAAE7B,MAAM,CAAC8B,IAAD,CADd,CAEE,KAAK,CAAE,CAAEG,cAAc,CAAE,UAAlB,CAFT,CAGE,MAAM,CAAEF,MAAM,EAAI,UAHpB,EADF,EATF,GADF,CAmBD,CA1BD,CAoCA,MAAO,IAAMG,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,MAMH,IALtBC,CAAAA,KAKsB,MALtBA,KAKsB,CAJtB/B,UAIsB,MAJtBA,UAIsB,CAHtBC,YAGsB,MAHtBA,YAGsB,CAFtB+B,8BAEsB,MAFtBA,8BAEsB,CADtBC,MACsB,MADtBA,MACsB,CACtB,GAAMC,CAAAA,MAAM,CAAGrC,SAAS,EAAxB,CACAsC,OAAO,CAACC,GAAR,CAAY,GAAZ,CAAiBnC,YAAjB,EACAkC,OAAO,CAACC,GAAR,CAAY,QAAZ,CAAsBF,MAAtB,EAEA,mBACE,2BACGH,KAAK,GAAKjC,KAAK,CAACe,iBAAhB,eACC,KAAC,MAAD,EACE,SAAS,CAAE,SADb,CAEE,IAAI,CAAE,oBAFR,CAGE,IAAI,CAAEb,UAAF,SAAEA,UAAF,iBAAEA,UAAU,CAAEM,KAAZ,CAAkBC,IAAlB,CAAuBC,aAH/B,EAFJ,CAQGuB,KAAK,GAAKjC,KAAK,CAACgB,QAAhB,eACC,KAAC,MAAD,EACE,SAAS,CAAE,SADb,CAEE,IAAI,CAAE,iBAFR,CAGE,IAAI,CAAEd,UAAF,SAAEA,UAAF,iBAAEA,UAAU,CAAEM,KAAZ,CAAkBC,IAAlB,CAAuBE,WAH/B,EATJ,CAgBGsB,KAAK,GAAKjC,KAAK,CAACiB,WAAhB,eACC,KAAC,MAAD,EACE,SAAS,CAAE,SADb,CAEE,IAAI,CAAE,cAFR,CAGE,IAAI,CAAEf,UAAF,SAAEA,UAAF,iBAAEA,UAAU,CAAEM,KAAZ,CAAkBC,IAAlB,CAAuBG,WAH/B,EAjBJ,CAwBGqB,KAAK,GAAKjC,KAAK,CAACmB,OAAhB,eACC,KAAC,MAAD,EACE,SAAS,CAAE,SADb,CAEE,IAAI,CAAE,oBAFR,CAGE,IAAI,CAAEjB,UAAF,SAAEA,UAAF,iBAAEA,UAAU,CAAEM,KAAZ,CAAkBC,IAAlB,CAAuBG,WAAvB,CAAmC2B,GAAnC,CACJrC,UADI,SACJA,UADI,iBACJA,UAAU,CAAEM,KAAZ,CAAkBC,IAAlB,CAAuB+B,eADnB,CAHR,EAzBJ,CAkCGP,KAAK,GAAKjC,KAAK,CAACqB,cAAhB,eACC,KAAC,MAAD,EACE,SAAS,CAAE,SADb,CAEE,IAAI,CAAE,kBAFR,CAGE,IAAI,CAAEnB,UAAF,SAAEA,UAAF,iBAAEA,UAAU,CAAEM,KAAZ,CAAkBC,IAAlB,CAAuBG,WAH/B,EAnCJ,CA0CGqB,KAAK,GAAKjC,KAAK,CAACsB,SAAhB,eACC,KAAC,MAAD,EACE,SAAS,CAAE,SADb,CAEE,IAAI,CAAE,sBAFR,CAGE,IAAI,CAAEnB,YAAF,SAAEA,YAAF,iBAAEA,YAAY,CAAEK,KAAd,CAAoBM,UAH5B,EA3CJ,CAkDGmB,KAAK,GAAKjC,KAAK,CAACuB,OAAhB,EAA2B,CAACpB,YAA5B,eACC,KAAC,MAAD,EACE,SAAS,CAAE,YADb,CAEE,IAAI,CAAE,yCAFR,CAGE,IAAI,CAAEsC,SAHR,EAnDJ,CA0DGR,KAAK,GAAKjC,KAAK,CAACoB,MAAhB,eACC,KAAC,MAAD,EACE,SAAS,CAAEc,8BAA8B,CAAG,SAAH,CAAe,SAD1D,CAEE,IAAI,CAAE,qBAFR,CAGE,IAAI,CAAE/B,YAAF,SAAEA,YAAF,iBAAEA,YAAY,CAAEK,KAAd,CAAoBM,UAH5B,CAIE,MAAM,CAAC,MAJT,EA3DJ,GADF,CAqED,CAhFM","sourcesContent":["import * as anchor from '@project-serum/anchor';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { PhaseCountdown } from './countdown';\r\nimport { toDate } from './utils';\r\nimport { FairLaunchAccount } from './fair-launch';\r\nimport { CandyMachineAccount } from './candy-machine';\r\nimport { useWallet } from '@solana/wallet-adapter-react';\r\n\r\nexport enum Phase {\r\n  AnticipationPhase, // FL, AKA Phase 0\r\n  SetPrice, // FL, AKA Phase 1\r\n  GracePeriod, // FL, AKA Phase 2\r\n  Lottery, // FL\r\n  RaffleFinished, // FL, AKA Phase 3\r\n  WaitForCM, // FL,\r\n  Phase4,\r\n  Unknown,\r\n}\r\n\r\nexport function getPhase(\r\n  fairLaunch: FairLaunchAccount | undefined,\r\n  candyMachine: CandyMachineAccount | undefined,\r\n): Phase {\r\n  const curr = new Date().getTime();\r\n  const phaseOne = toDate(fairLaunch?.state.data.phaseOneStart)?.getTime();\r\n  const phaseOneEnd = toDate(fairLaunch?.state.data.phaseOneEnd)?.getTime();\r\n  const phaseTwoEnd = toDate(fairLaunch?.state.data.phaseTwoEnd)?.getTime();\r\n  const candyMachineGoLive = toDate(candyMachine?.state.goLiveDate)?.getTime();\r\n\r\n  if (phaseOne && curr < phaseOne) {\r\n    return Phase.AnticipationPhase;\r\n  } else if (phaseOneEnd && curr <= phaseOneEnd) {\r\n    return Phase.SetPrice;\r\n  } else if (phaseTwoEnd && curr <= phaseTwoEnd) {\r\n    return Phase.GracePeriod;\r\n  } else if (\r\n    !fairLaunch?.state.phaseThreeStarted &&\r\n    phaseTwoEnd &&\r\n    curr > phaseTwoEnd\r\n  ) {\r\n    return Phase.Lottery;\r\n  } else if (\r\n    (!fairLaunch || fairLaunch?.state.phaseThreeStarted) &&\r\n    candyMachineGoLive &&\r\n    curr > candyMachineGoLive\r\n  ) {\r\n    return Phase.Phase4;\r\n  } else if (fairLaunch?.state.phaseThreeStarted) {\r\n    if (!candyMachine) {\r\n      return Phase.RaffleFinished;\r\n    } else {\r\n      return Phase.WaitForCM;\r\n    }\r\n  }\r\n  return Phase.Unknown;\r\n}\r\n\r\nconst Header = (props: {\r\n  phaseName: string;\r\n  desc: string;\r\n  date: anchor.BN | undefined;\r\n  status?: string;\r\n}) => {\r\n  const { phaseName, desc, date, status } = props;\r\n  return (\r\n    <Grid container justifyContent=\"center\">\r\n      <Grid xs={6} justifyContent=\"center\" direction=\"column\">\r\n        <Typography variant=\"h5\" style={{ fontWeight: 600 }}>\r\n          {phaseName}\r\n        </Typography>\r\n        <Typography variant=\"body1\" color=\"textSecondary\">\r\n          {desc}\r\n        </Typography>\r\n      </Grid>\r\n      <Grid xs={6} container justifyContent=\"flex-end\">\r\n        <PhaseCountdown\r\n          date={toDate(date)}\r\n          style={{ justifyContent: 'flex-end' }}\r\n          status={status || 'COMPLETE'}\r\n        />\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n};\r\n\r\ntype PhaseHeaderProps = {\r\n  phase: Phase;\r\n  fairLaunch?: FairLaunchAccount;\r\n  candyMachine?: CandyMachineAccount;\r\n  candyMachinePredatesFairLaunch: boolean;\r\n  rpcUrl: string;\r\n};\r\n\r\nexport const PhaseHeader = ({\r\n  phase,\r\n  fairLaunch,\r\n  candyMachine,\r\n  candyMachinePredatesFairLaunch,\r\n  rpcUrl,\r\n}: PhaseHeaderProps) => {\r\n  const wallet = useWallet();\r\n  console.log('D', candyMachine);\r\n  console.log('Wallet', wallet);\r\n\r\n  return (\r\n    <>\r\n      {phase === Phase.AnticipationPhase && (\r\n        <Header\r\n          phaseName={'Phase 0'}\r\n          desc={'Anticipation Phase'}\r\n          date={fairLaunch?.state.data.phaseOneStart}\r\n        />\r\n      )}\r\n      {phase === Phase.SetPrice && (\r\n        <Header\r\n          phaseName={'Phase 1'}\r\n          desc={'Set price phase'}\r\n          date={fairLaunch?.state.data.phaseOneEnd}\r\n        />\r\n      )}\r\n\r\n      {phase === Phase.GracePeriod && (\r\n        <Header\r\n          phaseName={'Phase 2'}\r\n          desc={'Grace period'}\r\n          date={fairLaunch?.state.data.phaseTwoEnd}\r\n        />\r\n      )}\r\n\r\n      {phase === Phase.Lottery && (\r\n        <Header\r\n          phaseName={'Phase 3'}\r\n          desc={'Raffle in progress'}\r\n          date={fairLaunch?.state.data.phaseTwoEnd.add(\r\n            fairLaunch?.state.data.lotteryDuration,\r\n          )}\r\n        />\r\n      )}\r\n\r\n      {phase === Phase.RaffleFinished && (\r\n        <Header\r\n          phaseName={'Phase 3'}\r\n          desc={'Raffle finished!'}\r\n          date={fairLaunch?.state.data.phaseTwoEnd}\r\n        />\r\n      )}\r\n\r\n      {phase === Phase.WaitForCM && (\r\n        <Header\r\n          phaseName={'Phase 3'}\r\n          desc={'Minting starts in...'}\r\n          date={candyMachine?.state.goLiveDate}\r\n        />\r\n      )}\r\n\r\n      {phase === Phase.Unknown && !candyMachine && (\r\n        <Header\r\n          phaseName={'Loading...'}\r\n          desc={'Waiting for you to connect your wallet.'}\r\n          date={undefined}\r\n        />\r\n      )}\r\n\r\n      {phase === Phase.Phase4 && (\r\n        <Header\r\n          phaseName={candyMachinePredatesFairLaunch ? 'Phase 3' : 'Phase 4'}\r\n          desc={'Candy Time üç¨ üç¨ üç¨'}\r\n          date={candyMachine?.state.goLiveDate}\r\n          status=\"LIVE\"\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}